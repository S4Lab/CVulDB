groonga__groonga
commit 90b23b6b264d846804ceb25d877e1e0e5ccbf738
Author:     HAYASHI Kentaro <hayashi@clear-code.com>
AuthorDate: Wed Mar 26 11:37:10 2014 +0900
Commit:     HAYASHI Kentaro <hayashi@clear-code.com>
CommitDate: Wed Mar 26 11:39:43 2014 +0900

    httpd: update nginx to latest stable release
    
    1.4.4 ->
    1.4.7
    
    Note that nginx 1.4.7 contains security fix(CVE-2014-0133).
    
    % make update-nginx NEW_NGINX_VERSION=1.4.7

diff --git a/nginx_version b/nginx_version
index 1c99cf0e8..be05bba98 100644
--- a/nginx_version
+++ b/nginx_version
@@ -1 +1 @@
-1.4.4
+1.4.7
diff --git a/vendor/nginx-1.4.4/CHANGES b/vendor/nginx-1.4.7/CHANGES
similarity index 99%
rename from vendor/nginx-1.4.4/CHANGES
rename to vendor/nginx-1.4.7/CHANGES
index 4899a6d92..4d9e62aa6 100644
--- a/vendor/nginx-1.4.4/CHANGES
+++ b/vendor/nginx-1.4.7/CHANGES
@@ -1,4 +1,52 @@
 
+Changes with nginx 1.4.7                                         18 Mar 2014
+
+    *) Security: a heap memory buffer overflow might occur in a worker
+       process while handling a specially crafted request by
+       ngx_http_spdy_module, potentially resulting in arbitrary code
+       execution (CVE-2014-0133).
+       Thanks to Lucas Molas, researcher at Programa STIC, Fundación Dr.
+       Manuel Sadosky, Buenos Aires, Argentina.
+
+    *) Bugfix: in the "fastcgi_next_upstream" directive.
+       Thanks to Lucas Molas.
+
+
+Changes with nginx 1.4.6                                         04 Mar 2014
+
+    *) Bugfix: the "client_max_body_size" directive might not work when
+       reading a request body using chunked transfer encoding; the bug had
+       appeared in 1.3.9.
+       Thanks to Lucas Molas.
+
+    *) Bugfix: a segmentation fault might occur in a worker process when
+       proxying WebSocket connections.
+
+
+Changes with nginx 1.4.5                                         11 Feb 2014
+
+    *) Bugfix: the $ssl_session_id variable contained full session
+       serialized instead of just a session id.
+       Thanks to Ivan Ristić.
+
+    *) Bugfix: client connections might be immediately closed if deferred
+       accept was used; the bug had appeared in 1.3.15.
+
+    *) Bugfix: alerts "zero size buf in output" might appear in logs while
+       proxying; the bug had appeared in 1.3.9.
+
+    *) Bugfix: a segmentation fault might occur in a worker process if the
+       ngx_http_spdy_module was used.
+
+    *) Bugfix: proxied WebSocket connections might hang right after
+       handshake if the select, poll, or /dev/poll methods were used.
+
+    *) Bugfix: a timeout might occur while reading client request body in an
+       SSL connection using chunked transfer encoding.
+
+    *) Bugfix: memory leak in nginx/Windows.
+
+
 Changes with nginx 1.4.4                                         19 Nov 2013
 
     *) Security: a character following an unescaped space in a request line
diff --git a/vendor/nginx-1.4.4/CHANGES.ru b/vendor/nginx-1.4.7/CHANGES.ru
similarity index 99%
rename from vendor/nginx-1.4.4/CHANGES.ru
rename to vendor/nginx-1.4.7/CHANGES.ru
index 2e12f09cd..2f9f3012f 100644
--- a/vendor/nginx-1.4.4/CHANGES.ru
+++ b/vendor/nginx-1.4.7/CHANGES.ru
@@ -1,4 +1,53 @@
 
+Изменения в nginx 1.4.7                                           18.03.2014
+
+    *) Безопасность: при обработке специально созданного запроса модулем
+       ngx_http_spdy_module могло происходить переполнение буфера в рабочем
+       процессе, что потенциально могло приводить к выполнению произвольного
+       кода (CVE-2014-0133).
+       Спасибо Lucas Molas из Programa STIC, Fundación Dr. Manuel Sadosky,
+       Buenos Aires, Argentina.
+
+    *) Исправление: в директиве fastcgi_next_upstream.
+       Спасибо Lucas Molas.
+
+
+Изменения в nginx 1.4.6                                           04.03.2014
+
+    *) Исправление: директива client_max_body_size могла не работать при
+       чтении тела запроса с использованием chunked transfer encoding;
+       ошибка появилась в 1.3.9.
+       Спасибо Lucas Molas.
+
+    *) Исправление: при проксировании WebSocket-соединений в рабочем
+       процессе мог произойти segmentation fault.
+
+
+Изменения в nginx 1.4.5                                           11.02.2014
+
+    *) Исправление: переменная $ssl_session_id содержала всю сессию в
+       сериализованном виде вместо её идентификатора.
+       Спасибо Ivan Ristić.
+
+    *) Исправление: клиентские соединения могли сразу закрываться, если
+       использовался отложенный accept; ошибка появилась в 1.3.15.
+
+    *) Исправление: при проксировании в логах могли появляться сообщения
+       "zero size buf in output"; ошибка появилась в 1.3.9.
+
+    *) Исправление: в рабочем процессе мог произойти segmentation fault,
+       если использовался модуль ngx_http_spdy_module.
+
+    *) Исправление: при использовании методов обработки соединений select,
+       poll и /dev/poll проксируемые WebSocket-соединения могли зависать
+       сразу после открытия.
+
+    *) Исправление: при чтении тела запроса с использованием chunked
+       transfer encoding по SSL-соединению мог произойти таймаут.
+
+    *) Исправление: утечки памяти в nginx/Windows.
+
+
 Изменения в nginx 1.4.4                                           19.11.2013
 
     *) Безопасность: символ, следующий за незакодированным пробелом в строке
diff --git a/vendor/nginx-1.4.4/LICENSE b/vendor/nginx-1.4.7/LICENSE
similarity index 94%
rename from vendor/nginx-1.4.4/LICENSE
rename to vendor/nginx-1.4.7/LICENSE
index 5d8097000..4ed7a6fc7 100644
--- a/vendor/nginx-1.4.4/LICENSE
+++ b/vendor/nginx-1.4.7/LICENSE
@@ -1,6 +1,6 @@
 /* 
- * Copyright (C) 2002-2013 Igor Sysoev
- * Copyright (C) 2011-2013 Nginx, Inc.
+ * Copyright (C) 2002-2014 Igor Sysoev
+ * Copyright (C) 2011-2014 Nginx, Inc.
  * All rights reserved.
  *
  * Redistribution and use in source and binary forms, with or without
diff --git a/vendor/nginx-1.4.4/README b/vendor/nginx-1.4.7/README
similarity index 100%
rename from vendor/nginx-1.4.4/README
rename to vendor/nginx-1.4.7/README
diff --git a/vendor/nginx-1.4.4/auto/cc/acc b/vendor/nginx-1.4.7/auto/cc/acc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/cc/acc
rename to vendor/nginx-1.4.7/auto/cc/acc
diff --git a/vendor/nginx-1.4.4/auto/cc/bcc b/vendor/nginx-1.4.7/auto/cc/bcc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/cc/bcc
rename to vendor/nginx-1.4.7/auto/cc/bcc
diff --git a/vendor/nginx-1.4.4/auto/cc/ccc b/vendor/nginx-1.4.7/auto/cc/ccc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/cc/ccc
rename to vendor/nginx-1.4.7/auto/cc/ccc
diff --git a/vendor/nginx-1.4.4/auto/cc/clang b/vendor/nginx-1.4.7/auto/cc/clang
similarity index 100%
rename from vendor/nginx-1.4.4/auto/cc/clang
rename to vendor/nginx-1.4.7/auto/cc/clang
diff --git a/vendor/nginx-1.4.4/auto/cc/conf b/vendor/nginx-1.4.7/auto/cc/conf
similarity index 100%
rename from vendor/nginx-1.4.4/auto/cc/conf
rename to vendor/nginx-1.4.7/auto/cc/conf
diff --git a/vendor/nginx-1.4.4/auto/cc/gcc b/vendor/nginx-1.4.7/auto/cc/gcc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/cc/gcc
rename to vendor/nginx-1.4.7/auto/cc/gcc
diff --git a/vendor/nginx-1.4.4/auto/cc/icc b/vendor/nginx-1.4.7/auto/cc/icc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/cc/icc
rename to vendor/nginx-1.4.7/auto/cc/icc
diff --git a/vendor/nginx-1.4.4/auto/cc/msvc b/vendor/nginx-1.4.7/auto/cc/msvc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/cc/msvc
rename to vendor/nginx-1.4.7/auto/cc/msvc
diff --git a/vendor/nginx-1.4.4/auto/cc/name b/vendor/nginx-1.4.7/auto/cc/name
similarity index 100%
rename from vendor/nginx-1.4.4/auto/cc/name
rename to vendor/nginx-1.4.7/auto/cc/name
diff --git a/vendor/nginx-1.4.4/auto/cc/owc b/vendor/nginx-1.4.7/auto/cc/owc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/cc/owc
rename to vendor/nginx-1.4.7/auto/cc/owc
diff --git a/vendor/nginx-1.4.4/auto/cc/sunc b/vendor/nginx-1.4.7/auto/cc/sunc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/cc/sunc
rename to vendor/nginx-1.4.7/auto/cc/sunc
diff --git a/vendor/nginx-1.4.4/auto/define b/vendor/nginx-1.4.7/auto/define
similarity index 100%
rename from vendor/nginx-1.4.4/auto/define
rename to vendor/nginx-1.4.7/auto/define
diff --git a/vendor/nginx-1.4.4/auto/endianness b/vendor/nginx-1.4.7/auto/endianness
similarity index 100%
rename from vendor/nginx-1.4.4/auto/endianness
rename to vendor/nginx-1.4.7/auto/endianness
diff --git a/vendor/nginx-1.4.4/auto/feature b/vendor/nginx-1.4.7/auto/feature
similarity index 100%
rename from vendor/nginx-1.4.4/auto/feature
rename to vendor/nginx-1.4.7/auto/feature
diff --git a/vendor/nginx-1.4.4/auto/have b/vendor/nginx-1.4.7/auto/have
similarity index 100%
rename from vendor/nginx-1.4.4/auto/have
rename to vendor/nginx-1.4.7/auto/have
diff --git a/vendor/nginx-1.4.4/auto/have_headers b/vendor/nginx-1.4.7/auto/have_headers
similarity index 100%
rename from vendor/nginx-1.4.4/auto/have_headers
rename to vendor/nginx-1.4.7/auto/have_headers
diff --git a/vendor/nginx-1.4.4/auto/headers b/vendor/nginx-1.4.7/auto/headers
similarity index 100%
rename from vendor/nginx-1.4.4/auto/headers
rename to vendor/nginx-1.4.7/auto/headers
diff --git a/vendor/nginx-1.4.4/auto/include b/vendor/nginx-1.4.7/auto/include
similarity index 100%
rename from vendor/nginx-1.4.4/auto/include
rename to vendor/nginx-1.4.7/auto/include
diff --git a/vendor/nginx-1.4.4/auto/init b/vendor/nginx-1.4.7/auto/init
similarity index 100%
rename from vendor/nginx-1.4.4/auto/init
rename to vendor/nginx-1.4.7/auto/init
diff --git a/vendor/nginx-1.4.4/auto/install b/vendor/nginx-1.4.7/auto/install
similarity index 100%
rename from vendor/nginx-1.4.4/auto/install
rename to vendor/nginx-1.4.7/auto/install
diff --git a/vendor/nginx-1.4.4/auto/lib/conf b/vendor/nginx-1.4.7/auto/lib/conf
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/conf
rename to vendor/nginx-1.4.7/auto/lib/conf
diff --git a/vendor/nginx-1.4.4/auto/lib/geoip/conf b/vendor/nginx-1.4.7/auto/lib/geoip/conf
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/geoip/conf
rename to vendor/nginx-1.4.7/auto/lib/geoip/conf
diff --git a/vendor/nginx-1.4.4/auto/lib/google-perftools/conf b/vendor/nginx-1.4.7/auto/lib/google-perftools/conf
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/google-perftools/conf
rename to vendor/nginx-1.4.7/auto/lib/google-perftools/conf
diff --git a/vendor/nginx-1.4.4/auto/lib/libatomic/conf b/vendor/nginx-1.4.7/auto/lib/libatomic/conf
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/libatomic/conf
rename to vendor/nginx-1.4.7/auto/lib/libatomic/conf
diff --git a/vendor/nginx-1.4.4/auto/lib/libatomic/make b/vendor/nginx-1.4.7/auto/lib/libatomic/make
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/libatomic/make
rename to vendor/nginx-1.4.7/auto/lib/libatomic/make
diff --git a/vendor/nginx-1.4.4/auto/lib/libgd/conf b/vendor/nginx-1.4.7/auto/lib/libgd/conf
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/libgd/conf
rename to vendor/nginx-1.4.7/auto/lib/libgd/conf
diff --git a/vendor/nginx-1.4.4/auto/lib/libxslt/conf b/vendor/nginx-1.4.7/auto/lib/libxslt/conf
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/libxslt/conf
rename to vendor/nginx-1.4.7/auto/lib/libxslt/conf
diff --git a/vendor/nginx-1.4.4/auto/lib/make b/vendor/nginx-1.4.7/auto/lib/make
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/make
rename to vendor/nginx-1.4.7/auto/lib/make
diff --git a/vendor/nginx-1.4.4/auto/lib/md5/conf b/vendor/nginx-1.4.7/auto/lib/md5/conf
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/md5/conf
rename to vendor/nginx-1.4.7/auto/lib/md5/conf
diff --git a/vendor/nginx-1.4.4/auto/lib/md5/make b/vendor/nginx-1.4.7/auto/lib/md5/make
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/md5/make
rename to vendor/nginx-1.4.7/auto/lib/md5/make
diff --git a/vendor/nginx-1.4.4/auto/lib/md5/makefile.bcc b/vendor/nginx-1.4.7/auto/lib/md5/makefile.bcc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/md5/makefile.bcc
rename to vendor/nginx-1.4.7/auto/lib/md5/makefile.bcc
diff --git a/vendor/nginx-1.4.4/auto/lib/md5/makefile.msvc b/vendor/nginx-1.4.7/auto/lib/md5/makefile.msvc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/md5/makefile.msvc
rename to vendor/nginx-1.4.7/auto/lib/md5/makefile.msvc
diff --git a/vendor/nginx-1.4.4/auto/lib/md5/makefile.owc b/vendor/nginx-1.4.7/auto/lib/md5/makefile.owc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/md5/makefile.owc
rename to vendor/nginx-1.4.7/auto/lib/md5/makefile.owc
diff --git a/vendor/nginx-1.4.4/auto/lib/openssl/conf b/vendor/nginx-1.4.7/auto/lib/openssl/conf
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/openssl/conf
rename to vendor/nginx-1.4.7/auto/lib/openssl/conf
diff --git a/vendor/nginx-1.4.4/auto/lib/openssl/make b/vendor/nginx-1.4.7/auto/lib/openssl/make
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/openssl/make
rename to vendor/nginx-1.4.7/auto/lib/openssl/make
diff --git a/vendor/nginx-1.4.4/auto/lib/openssl/makefile.bcc b/vendor/nginx-1.4.7/auto/lib/openssl/makefile.bcc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/openssl/makefile.bcc
rename to vendor/nginx-1.4.7/auto/lib/openssl/makefile.bcc
diff --git a/vendor/nginx-1.4.4/auto/lib/openssl/makefile.msvc b/vendor/nginx-1.4.7/auto/lib/openssl/makefile.msvc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/openssl/makefile.msvc
rename to vendor/nginx-1.4.7/auto/lib/openssl/makefile.msvc
diff --git a/vendor/nginx-1.4.4/auto/lib/pcre/conf b/vendor/nginx-1.4.7/auto/lib/pcre/conf
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/pcre/conf
rename to vendor/nginx-1.4.7/auto/lib/pcre/conf
diff --git a/vendor/nginx-1.4.4/auto/lib/pcre/make b/vendor/nginx-1.4.7/auto/lib/pcre/make
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/pcre/make
rename to vendor/nginx-1.4.7/auto/lib/pcre/make
diff --git a/vendor/nginx-1.4.4/auto/lib/pcre/makefile.bcc b/vendor/nginx-1.4.7/auto/lib/pcre/makefile.bcc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/pcre/makefile.bcc
rename to vendor/nginx-1.4.7/auto/lib/pcre/makefile.bcc
diff --git a/vendor/nginx-1.4.4/auto/lib/pcre/makefile.msvc b/vendor/nginx-1.4.7/auto/lib/pcre/makefile.msvc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/pcre/makefile.msvc
rename to vendor/nginx-1.4.7/auto/lib/pcre/makefile.msvc
diff --git a/vendor/nginx-1.4.4/auto/lib/pcre/makefile.owc b/vendor/nginx-1.4.7/auto/lib/pcre/makefile.owc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/pcre/makefile.owc
rename to vendor/nginx-1.4.7/auto/lib/pcre/makefile.owc
diff --git a/vendor/nginx-1.4.4/auto/lib/perl/conf b/vendor/nginx-1.4.7/auto/lib/perl/conf
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/perl/conf
rename to vendor/nginx-1.4.7/auto/lib/perl/conf
diff --git a/vendor/nginx-1.4.4/auto/lib/perl/make b/vendor/nginx-1.4.7/auto/lib/perl/make
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/perl/make
rename to vendor/nginx-1.4.7/auto/lib/perl/make
diff --git a/vendor/nginx-1.4.4/auto/lib/sha1/conf b/vendor/nginx-1.4.7/auto/lib/sha1/conf
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/sha1/conf
rename to vendor/nginx-1.4.7/auto/lib/sha1/conf
diff --git a/vendor/nginx-1.4.4/auto/lib/sha1/make b/vendor/nginx-1.4.7/auto/lib/sha1/make
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/sha1/make
rename to vendor/nginx-1.4.7/auto/lib/sha1/make
diff --git a/vendor/nginx-1.4.4/auto/lib/sha1/makefile.bcc b/vendor/nginx-1.4.7/auto/lib/sha1/makefile.bcc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/sha1/makefile.bcc
rename to vendor/nginx-1.4.7/auto/lib/sha1/makefile.bcc
diff --git a/vendor/nginx-1.4.4/auto/lib/sha1/makefile.msvc b/vendor/nginx-1.4.7/auto/lib/sha1/makefile.msvc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/sha1/makefile.msvc
rename to vendor/nginx-1.4.7/auto/lib/sha1/makefile.msvc
diff --git a/vendor/nginx-1.4.4/auto/lib/sha1/makefile.owc b/vendor/nginx-1.4.7/auto/lib/sha1/makefile.owc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/sha1/makefile.owc
rename to vendor/nginx-1.4.7/auto/lib/sha1/makefile.owc
diff --git a/vendor/nginx-1.4.4/auto/lib/test b/vendor/nginx-1.4.7/auto/lib/test
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/test
rename to vendor/nginx-1.4.7/auto/lib/test
diff --git a/vendor/nginx-1.4.4/auto/lib/zlib/conf b/vendor/nginx-1.4.7/auto/lib/zlib/conf
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/zlib/conf
rename to vendor/nginx-1.4.7/auto/lib/zlib/conf
diff --git a/vendor/nginx-1.4.4/auto/lib/zlib/make b/vendor/nginx-1.4.7/auto/lib/zlib/make
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/zlib/make
rename to vendor/nginx-1.4.7/auto/lib/zlib/make
diff --git a/vendor/nginx-1.4.4/auto/lib/zlib/makefile.bcc b/vendor/nginx-1.4.7/auto/lib/zlib/makefile.bcc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/zlib/makefile.bcc
rename to vendor/nginx-1.4.7/auto/lib/zlib/makefile.bcc
diff --git a/vendor/nginx-1.4.4/auto/lib/zlib/makefile.msvc b/vendor/nginx-1.4.7/auto/lib/zlib/makefile.msvc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/zlib/makefile.msvc
rename to vendor/nginx-1.4.7/auto/lib/zlib/makefile.msvc
diff --git a/vendor/nginx-1.4.4/auto/lib/zlib/makefile.owc b/vendor/nginx-1.4.7/auto/lib/zlib/makefile.owc
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/zlib/makefile.owc
rename to vendor/nginx-1.4.7/auto/lib/zlib/makefile.owc
diff --git a/vendor/nginx-1.4.4/auto/lib/zlib/patch.zlib.h b/vendor/nginx-1.4.7/auto/lib/zlib/patch.zlib.h
similarity index 100%
rename from vendor/nginx-1.4.4/auto/lib/zlib/patch.zlib.h
rename to vendor/nginx-1.4.7/auto/lib/zlib/patch.zlib.h
diff --git a/vendor/nginx-1.4.4/auto/make b/vendor/nginx-1.4.7/auto/make
similarity index 100%
rename from vendor/nginx-1.4.4/auto/make
rename to vendor/nginx-1.4.7/auto/make
diff --git a/vendor/nginx-1.4.4/auto/modules b/vendor/nginx-1.4.7/auto/modules
similarity index 100%
rename from vendor/nginx-1.4.4/auto/modules
rename to vendor/nginx-1.4.7/auto/modules
diff --git a/vendor/nginx-1.4.4/auto/nohave b/vendor/nginx-1.4.7/auto/nohave
similarity index 100%
rename from vendor/nginx-1.4.4/auto/nohave
rename to vendor/nginx-1.4.7/auto/nohave
diff --git a/vendor/nginx-1.4.4/auto/options b/vendor/nginx-1.4.7/auto/options
similarity index 100%
rename from vendor/nginx-1.4.4/auto/options
rename to vendor/nginx-1.4.7/auto/options
diff --git a/vendor/nginx-1.4.4/auto/os/conf b/vendor/nginx-1.4.7/auto/os/conf
similarity index 100%
rename from vendor/nginx-1.4.4/auto/os/conf
rename to vendor/nginx-1.4.7/auto/os/conf
diff --git a/vendor/nginx-1.4.4/auto/os/darwin b/vendor/nginx-1.4.7/auto/os/darwin
similarity index 100%
rename from vendor/nginx-1.4.4/auto/os/darwin
rename to vendor/nginx-1.4.7/auto/os/darwin
diff --git a/vendor/nginx-1.4.4/auto/os/freebsd b/vendor/nginx-1.4.7/auto/os/freebsd
similarity index 100%
rename from vendor/nginx-1.4.4/auto/os/freebsd
rename to vendor/nginx-1.4.7/auto/os/freebsd
diff --git a/vendor/nginx-1.4.4/auto/os/linux b/vendor/nginx-1.4.7/auto/os/linux
similarity index 100%
rename from vendor/nginx-1.4.4/auto/os/linux
rename to vendor/nginx-1.4.7/auto/os/linux
diff --git a/vendor/nginx-1.4.4/auto/os/solaris b/vendor/nginx-1.4.7/auto/os/solaris
similarity index 100%
rename from vendor/nginx-1.4.4/auto/os/solaris
rename to vendor/nginx-1.4.7/auto/os/solaris
diff --git a/vendor/nginx-1.4.4/auto/os/win32 b/vendor/nginx-1.4.7/auto/os/win32
similarity index 100%
rename from vendor/nginx-1.4.4/auto/os/win32
rename to vendor/nginx-1.4.7/auto/os/win32
diff --git a/vendor/nginx-1.4.4/auto/sources b/vendor/nginx-1.4.7/auto/sources
similarity index 100%
rename from vendor/nginx-1.4.4/auto/sources
rename to vendor/nginx-1.4.7/auto/sources
diff --git a/vendor/nginx-1.4.4/auto/stubs b/vendor/nginx-1.4.7/auto/stubs
similarity index 100%
rename from vendor/nginx-1.4.4/auto/stubs
rename to vendor/nginx-1.4.7/auto/stubs
diff --git a/vendor/nginx-1.4.4/auto/summary b/vendor/nginx-1.4.7/auto/summary
similarity index 100%
rename from vendor/nginx-1.4.4/auto/summary
rename to vendor/nginx-1.4.7/auto/summary
diff --git a/vendor/nginx-1.4.4/auto/types/sizeof b/vendor/nginx-1.4.7/auto/types/sizeof
similarity index 100%
rename from vendor/nginx-1.4.4/auto/types/sizeof
rename to vendor/nginx-1.4.7/auto/types/sizeof
diff --git a/vendor/nginx-1.4.4/auto/types/typedef b/vendor/nginx-1.4.7/auto/types/typedef
similarity index 100%
rename from vendor/nginx-1.4.4/auto/types/typedef
rename to vendor/nginx-1.4.7/auto/types/typedef
diff --git a/vendor/nginx-1.4.4/auto/types/uintptr_t b/vendor/nginx-1.4.7/auto/types/uintptr_t
similarity index 100%
rename from vendor/nginx-1.4.4/auto/types/uintptr_t
rename to vendor/nginx-1.4.7/auto/types/uintptr_t
diff --git a/vendor/nginx-1.4.4/auto/types/value b/vendor/nginx-1.4.7/auto/types/value
similarity index 100%
rename from vendor/nginx-1.4.4/auto/types/value
rename to vendor/nginx-1.4.7/auto/types/value
diff --git a/vendor/nginx-1.4.4/auto/unix b/vendor/nginx-1.4.7/auto/unix
similarity index 100%
rename from vendor/nginx-1.4.4/auto/unix
rename to vendor/nginx-1.4.7/auto/unix
diff --git a/vendor/nginx-1.4.4/conf/fastcgi.conf b/vendor/nginx-1.4.7/conf/fastcgi.conf
similarity index 100%
rename from vendor/nginx-1.4.4/conf/fastcgi.conf
rename to vendor/nginx-1.4.7/conf/fastcgi.conf
diff --git a/vendor/nginx-1.4.4/conf/fastcgi_params b/vendor/nginx-1.4.7/conf/fastcgi_params
similarity index 100%
rename from vendor/nginx-1.4.4/conf/fastcgi_params
rename to vendor/nginx-1.4.7/conf/fastcgi_params
diff --git a/vendor/nginx-1.4.4/conf/koi-utf b/vendor/nginx-1.4.7/conf/koi-utf
similarity index 100%
rename from vendor/nginx-1.4.4/conf/koi-utf
rename to vendor/nginx-1.4.7/conf/koi-utf
diff --git a/vendor/nginx-1.4.4/conf/koi-win b/vendor/nginx-1.4.7/conf/koi-win
similarity index 100%
rename from vendor/nginx-1.4.4/conf/koi-win
rename to vendor/nginx-1.4.7/conf/koi-win
diff --git a/vendor/nginx-1.4.4/conf/mime.types b/vendor/nginx-1.4.7/conf/mime.types
similarity index 100%
rename from vendor/nginx-1.4.4/conf/mime.types
rename to vendor/nginx-1.4.7/conf/mime.types
diff --git a/vendor/nginx-1.4.4/conf/nginx.conf b/vendor/nginx-1.4.7/conf/nginx.conf
similarity index 100%
rename from vendor/nginx-1.4.4/conf/nginx.conf
rename to vendor/nginx-1.4.7/conf/nginx.conf
diff --git a/vendor/nginx-1.4.4/conf/scgi_params b/vendor/nginx-1.4.7/conf/scgi_params
similarity index 100%
rename from vendor/nginx-1.4.4/conf/scgi_params
rename to vendor/nginx-1.4.7/conf/scgi_params
diff --git a/vendor/nginx-1.4.4/conf/uwsgi_params b/vendor/nginx-1.4.7/conf/uwsgi_params
similarity index 100%
rename from vendor/nginx-1.4.4/conf/uwsgi_params
rename to vendor/nginx-1.4.7/conf/uwsgi_params
diff --git a/vendor/nginx-1.4.4/conf/win-utf b/vendor/nginx-1.4.7/conf/win-utf
similarity index 100%
rename from vendor/nginx-1.4.4/conf/win-utf
rename to vendor/nginx-1.4.7/conf/win-utf
diff --git a/vendor/nginx-1.4.4/configure b/vendor/nginx-1.4.7/configure
similarity index 100%
rename from vendor/nginx-1.4.4/configure
rename to vendor/nginx-1.4.7/configure
diff --git a/vendor/nginx-1.4.4/contrib/README b/vendor/nginx-1.4.7/contrib/README
similarity index 100%
rename from vendor/nginx-1.4.4/contrib/README
rename to vendor/nginx-1.4.7/contrib/README
diff --git a/vendor/nginx-1.4.4/contrib/geo2nginx.pl b/vendor/nginx-1.4.7/contrib/geo2nginx.pl
similarity index 100%
rename from vendor/nginx-1.4.4/contrib/geo2nginx.pl
rename to vendor/nginx-1.4.7/contrib/geo2nginx.pl
diff --git a/vendor/nginx-1.4.4/contrib/unicode2nginx/koi-utf b/vendor/nginx-1.4.7/contrib/unicode2nginx/koi-utf
similarity index 100%
rename from vendor/nginx-1.4.4/contrib/unicode2nginx/koi-utf
rename to vendor/nginx-1.4.7/contrib/unicode2nginx/koi-utf
diff --git a/vendor/nginx-1.4.4/contrib/unicode2nginx/unicode-to-nginx.pl b/vendor/nginx-1.4.7/contrib/unicode2nginx/unicode-to-nginx.pl
similarity index 100%
rename from vendor/nginx-1.4.4/contrib/unicode2nginx/unicode-to-nginx.pl
rename to vendor/nginx-1.4.7/contrib/unicode2nginx/unicode-to-nginx.pl
diff --git a/vendor/nginx-1.4.4/contrib/unicode2nginx/win-utf b/vendor/nginx-1.4.7/contrib/unicode2nginx/win-utf
similarity index 100%
rename from vendor/nginx-1.4.4/contrib/unicode2nginx/win-utf
rename to vendor/nginx-1.4.7/contrib/unicode2nginx/win-utf
diff --git a/vendor/nginx-1.4.4/html/50x.html b/vendor/nginx-1.4.7/html/50x.html
similarity index 100%
rename from vendor/nginx-1.4.4/html/50x.html
rename to vendor/nginx-1.4.7/html/50x.html
diff --git a/vendor/nginx-1.4.4/html/index.html b/vendor/nginx-1.4.7/html/index.html
similarity index 100%
rename from vendor/nginx-1.4.4/html/index.html
rename to vendor/nginx-1.4.7/html/index.html
diff --git a/vendor/nginx-1.4.4/man/nginx.8 b/vendor/nginx-1.4.7/man/nginx.8
similarity index 100%
rename from vendor/nginx-1.4.4/man/nginx.8
rename to vendor/nginx-1.4.7/man/nginx.8
diff --git a/vendor/nginx-1.4.4/src/core/nginx.c b/vendor/nginx-1.4.7/src/core/nginx.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/nginx.c
rename to vendor/nginx-1.4.7/src/core/nginx.c
diff --git a/vendor/nginx-1.4.4/src/core/nginx.h b/vendor/nginx-1.4.7/src/core/nginx.h
similarity index 80%
rename from vendor/nginx-1.4.4/src/core/nginx.h
rename to vendor/nginx-1.4.7/src/core/nginx.h
index 609bdaa89..77c88bf5f 100644
--- a/vendor/nginx-1.4.4/src/core/nginx.h
+++ b/vendor/nginx-1.4.7/src/core/nginx.h
@@ -9,8 +9,8 @@
 #define _NGINX_H_INCLUDED_
 
 
-#define nginx_version      1004004
-#define NGINX_VERSION      "1.4.4"
+#define nginx_version      1004007
+#define NGINX_VERSION      "1.4.7"
 #define NGINX_VER          "nginx/" NGINX_VERSION
 
 #define NGINX_VAR          "NGINX"
diff --git a/vendor/nginx-1.4.4/src/core/ngx_array.c b/vendor/nginx-1.4.7/src/core/ngx_array.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_array.c
rename to vendor/nginx-1.4.7/src/core/ngx_array.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_array.h b/vendor/nginx-1.4.7/src/core/ngx_array.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_array.h
rename to vendor/nginx-1.4.7/src/core/ngx_array.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_buf.c b/vendor/nginx-1.4.7/src/core/ngx_buf.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_buf.c
rename to vendor/nginx-1.4.7/src/core/ngx_buf.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_buf.h b/vendor/nginx-1.4.7/src/core/ngx_buf.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_buf.h
rename to vendor/nginx-1.4.7/src/core/ngx_buf.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_conf_file.c b/vendor/nginx-1.4.7/src/core/ngx_conf_file.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_conf_file.c
rename to vendor/nginx-1.4.7/src/core/ngx_conf_file.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_conf_file.h b/vendor/nginx-1.4.7/src/core/ngx_conf_file.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_conf_file.h
rename to vendor/nginx-1.4.7/src/core/ngx_conf_file.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_config.h b/vendor/nginx-1.4.7/src/core/ngx_config.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_config.h
rename to vendor/nginx-1.4.7/src/core/ngx_config.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_connection.c b/vendor/nginx-1.4.7/src/core/ngx_connection.c
similarity index 98%
rename from vendor/nginx-1.4.4/src/core/ngx_connection.c
rename to vendor/nginx-1.4.7/src/core/ngx_connection.c
index 7ed781e0a..986bf0d02 100644
--- a/vendor/nginx-1.4.4/src/core/ngx_connection.c
+++ b/vendor/nginx-1.4.7/src/core/ngx_connection.c
@@ -647,7 +647,13 @@ ngx_configure_listening_sockets(ngx_cycle_t *cycle)
         if (ls[i].add_deferred || ls[i].delete_deferred) {
 
             if (ls[i].add_deferred) {
-                timeout = (int) (ls[i].post_accept_timeout / 1000);
+                /*
+                 * There is no way to find out how long a connection was
+                 * in queue (and a connection may bypass deferred queue at all
+                 * if syncookies were used), hence we use 1 second timeout
+                 * here.
+                 */
+                timeout = 1;
 
             } else {
                 timeout = 0;
diff --git a/vendor/nginx-1.4.4/src/core/ngx_connection.h b/vendor/nginx-1.4.7/src/core/ngx_connection.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_connection.h
rename to vendor/nginx-1.4.7/src/core/ngx_connection.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_core.h b/vendor/nginx-1.4.7/src/core/ngx_core.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_core.h
rename to vendor/nginx-1.4.7/src/core/ngx_core.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_cpuinfo.c b/vendor/nginx-1.4.7/src/core/ngx_cpuinfo.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_cpuinfo.c
rename to vendor/nginx-1.4.7/src/core/ngx_cpuinfo.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_crc.h b/vendor/nginx-1.4.7/src/core/ngx_crc.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_crc.h
rename to vendor/nginx-1.4.7/src/core/ngx_crc.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_crc32.c b/vendor/nginx-1.4.7/src/core/ngx_crc32.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_crc32.c
rename to vendor/nginx-1.4.7/src/core/ngx_crc32.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_crc32.h b/vendor/nginx-1.4.7/src/core/ngx_crc32.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_crc32.h
rename to vendor/nginx-1.4.7/src/core/ngx_crc32.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_crypt.c b/vendor/nginx-1.4.7/src/core/ngx_crypt.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_crypt.c
rename to vendor/nginx-1.4.7/src/core/ngx_crypt.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_crypt.h b/vendor/nginx-1.4.7/src/core/ngx_crypt.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_crypt.h
rename to vendor/nginx-1.4.7/src/core/ngx_crypt.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_cycle.c b/vendor/nginx-1.4.7/src/core/ngx_cycle.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_cycle.c
rename to vendor/nginx-1.4.7/src/core/ngx_cycle.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_cycle.h b/vendor/nginx-1.4.7/src/core/ngx_cycle.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_cycle.h
rename to vendor/nginx-1.4.7/src/core/ngx_cycle.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_file.c b/vendor/nginx-1.4.7/src/core/ngx_file.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_file.c
rename to vendor/nginx-1.4.7/src/core/ngx_file.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_file.h b/vendor/nginx-1.4.7/src/core/ngx_file.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_file.h
rename to vendor/nginx-1.4.7/src/core/ngx_file.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_hash.c b/vendor/nginx-1.4.7/src/core/ngx_hash.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_hash.c
rename to vendor/nginx-1.4.7/src/core/ngx_hash.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_hash.h b/vendor/nginx-1.4.7/src/core/ngx_hash.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_hash.h
rename to vendor/nginx-1.4.7/src/core/ngx_hash.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_inet.c b/vendor/nginx-1.4.7/src/core/ngx_inet.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_inet.c
rename to vendor/nginx-1.4.7/src/core/ngx_inet.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_inet.h b/vendor/nginx-1.4.7/src/core/ngx_inet.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_inet.h
rename to vendor/nginx-1.4.7/src/core/ngx_inet.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_list.c b/vendor/nginx-1.4.7/src/core/ngx_list.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_list.c
rename to vendor/nginx-1.4.7/src/core/ngx_list.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_list.h b/vendor/nginx-1.4.7/src/core/ngx_list.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_list.h
rename to vendor/nginx-1.4.7/src/core/ngx_list.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_log.c b/vendor/nginx-1.4.7/src/core/ngx_log.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_log.c
rename to vendor/nginx-1.4.7/src/core/ngx_log.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_log.h b/vendor/nginx-1.4.7/src/core/ngx_log.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_log.h
rename to vendor/nginx-1.4.7/src/core/ngx_log.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_md5.c b/vendor/nginx-1.4.7/src/core/ngx_md5.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_md5.c
rename to vendor/nginx-1.4.7/src/core/ngx_md5.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_md5.h b/vendor/nginx-1.4.7/src/core/ngx_md5.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_md5.h
rename to vendor/nginx-1.4.7/src/core/ngx_md5.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_murmurhash.c b/vendor/nginx-1.4.7/src/core/ngx_murmurhash.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_murmurhash.c
rename to vendor/nginx-1.4.7/src/core/ngx_murmurhash.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_murmurhash.h b/vendor/nginx-1.4.7/src/core/ngx_murmurhash.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_murmurhash.h
rename to vendor/nginx-1.4.7/src/core/ngx_murmurhash.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_open_file_cache.c b/vendor/nginx-1.4.7/src/core/ngx_open_file_cache.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_open_file_cache.c
rename to vendor/nginx-1.4.7/src/core/ngx_open_file_cache.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_open_file_cache.h b/vendor/nginx-1.4.7/src/core/ngx_open_file_cache.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_open_file_cache.h
rename to vendor/nginx-1.4.7/src/core/ngx_open_file_cache.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_output_chain.c b/vendor/nginx-1.4.7/src/core/ngx_output_chain.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_output_chain.c
rename to vendor/nginx-1.4.7/src/core/ngx_output_chain.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_palloc.c b/vendor/nginx-1.4.7/src/core/ngx_palloc.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_palloc.c
rename to vendor/nginx-1.4.7/src/core/ngx_palloc.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_palloc.h b/vendor/nginx-1.4.7/src/core/ngx_palloc.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_palloc.h
rename to vendor/nginx-1.4.7/src/core/ngx_palloc.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_parse.c b/vendor/nginx-1.4.7/src/core/ngx_parse.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_parse.c
rename to vendor/nginx-1.4.7/src/core/ngx_parse.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_parse.h b/vendor/nginx-1.4.7/src/core/ngx_parse.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_parse.h
rename to vendor/nginx-1.4.7/src/core/ngx_parse.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_queue.c b/vendor/nginx-1.4.7/src/core/ngx_queue.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_queue.c
rename to vendor/nginx-1.4.7/src/core/ngx_queue.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_queue.h b/vendor/nginx-1.4.7/src/core/ngx_queue.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_queue.h
rename to vendor/nginx-1.4.7/src/core/ngx_queue.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_radix_tree.c b/vendor/nginx-1.4.7/src/core/ngx_radix_tree.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_radix_tree.c
rename to vendor/nginx-1.4.7/src/core/ngx_radix_tree.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_radix_tree.h b/vendor/nginx-1.4.7/src/core/ngx_radix_tree.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_radix_tree.h
rename to vendor/nginx-1.4.7/src/core/ngx_radix_tree.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_rbtree.c b/vendor/nginx-1.4.7/src/core/ngx_rbtree.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_rbtree.c
rename to vendor/nginx-1.4.7/src/core/ngx_rbtree.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_rbtree.h b/vendor/nginx-1.4.7/src/core/ngx_rbtree.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_rbtree.h
rename to vendor/nginx-1.4.7/src/core/ngx_rbtree.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_regex.c b/vendor/nginx-1.4.7/src/core/ngx_regex.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_regex.c
rename to vendor/nginx-1.4.7/src/core/ngx_regex.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_regex.h b/vendor/nginx-1.4.7/src/core/ngx_regex.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_regex.h
rename to vendor/nginx-1.4.7/src/core/ngx_regex.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_resolver.c b/vendor/nginx-1.4.7/src/core/ngx_resolver.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_resolver.c
rename to vendor/nginx-1.4.7/src/core/ngx_resolver.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_resolver.h b/vendor/nginx-1.4.7/src/core/ngx_resolver.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_resolver.h
rename to vendor/nginx-1.4.7/src/core/ngx_resolver.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_sha1.h b/vendor/nginx-1.4.7/src/core/ngx_sha1.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_sha1.h
rename to vendor/nginx-1.4.7/src/core/ngx_sha1.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_shmtx.c b/vendor/nginx-1.4.7/src/core/ngx_shmtx.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_shmtx.c
rename to vendor/nginx-1.4.7/src/core/ngx_shmtx.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_shmtx.h b/vendor/nginx-1.4.7/src/core/ngx_shmtx.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_shmtx.h
rename to vendor/nginx-1.4.7/src/core/ngx_shmtx.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_slab.c b/vendor/nginx-1.4.7/src/core/ngx_slab.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_slab.c
rename to vendor/nginx-1.4.7/src/core/ngx_slab.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_slab.h b/vendor/nginx-1.4.7/src/core/ngx_slab.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_slab.h
rename to vendor/nginx-1.4.7/src/core/ngx_slab.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_spinlock.c b/vendor/nginx-1.4.7/src/core/ngx_spinlock.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_spinlock.c
rename to vendor/nginx-1.4.7/src/core/ngx_spinlock.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_string.c b/vendor/nginx-1.4.7/src/core/ngx_string.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_string.c
rename to vendor/nginx-1.4.7/src/core/ngx_string.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_string.h b/vendor/nginx-1.4.7/src/core/ngx_string.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_string.h
rename to vendor/nginx-1.4.7/src/core/ngx_string.h
diff --git a/vendor/nginx-1.4.4/src/core/ngx_times.c b/vendor/nginx-1.4.7/src/core/ngx_times.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_times.c
rename to vendor/nginx-1.4.7/src/core/ngx_times.c
diff --git a/vendor/nginx-1.4.4/src/core/ngx_times.h b/vendor/nginx-1.4.7/src/core/ngx_times.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/core/ngx_times.h
rename to vendor/nginx-1.4.7/src/core/ngx_times.h
diff --git a/vendor/nginx-1.4.4/src/event/modules/ngx_aio_module.c b/vendor/nginx-1.4.7/src/event/modules/ngx_aio_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/modules/ngx_aio_module.c
rename to vendor/nginx-1.4.7/src/event/modules/ngx_aio_module.c
diff --git a/vendor/nginx-1.4.4/src/event/modules/ngx_devpoll_module.c b/vendor/nginx-1.4.7/src/event/modules/ngx_devpoll_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/modules/ngx_devpoll_module.c
rename to vendor/nginx-1.4.7/src/event/modules/ngx_devpoll_module.c
diff --git a/vendor/nginx-1.4.4/src/event/modules/ngx_epoll_module.c b/vendor/nginx-1.4.7/src/event/modules/ngx_epoll_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/modules/ngx_epoll_module.c
rename to vendor/nginx-1.4.7/src/event/modules/ngx_epoll_module.c
diff --git a/vendor/nginx-1.4.4/src/event/modules/ngx_eventport_module.c b/vendor/nginx-1.4.7/src/event/modules/ngx_eventport_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/modules/ngx_eventport_module.c
rename to vendor/nginx-1.4.7/src/event/modules/ngx_eventport_module.c
diff --git a/vendor/nginx-1.4.4/src/event/modules/ngx_kqueue_module.c b/vendor/nginx-1.4.7/src/event/modules/ngx_kqueue_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/modules/ngx_kqueue_module.c
rename to vendor/nginx-1.4.7/src/event/modules/ngx_kqueue_module.c
diff --git a/vendor/nginx-1.4.4/src/event/modules/ngx_poll_module.c b/vendor/nginx-1.4.7/src/event/modules/ngx_poll_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/modules/ngx_poll_module.c
rename to vendor/nginx-1.4.7/src/event/modules/ngx_poll_module.c
diff --git a/vendor/nginx-1.4.4/src/event/modules/ngx_rtsig_module.c b/vendor/nginx-1.4.7/src/event/modules/ngx_rtsig_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/modules/ngx_rtsig_module.c
rename to vendor/nginx-1.4.7/src/event/modules/ngx_rtsig_module.c
diff --git a/vendor/nginx-1.4.4/src/event/modules/ngx_select_module.c b/vendor/nginx-1.4.7/src/event/modules/ngx_select_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/modules/ngx_select_module.c
rename to vendor/nginx-1.4.7/src/event/modules/ngx_select_module.c
diff --git a/vendor/nginx-1.4.4/src/event/modules/ngx_win32_select_module.c b/vendor/nginx-1.4.7/src/event/modules/ngx_win32_select_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/modules/ngx_win32_select_module.c
rename to vendor/nginx-1.4.7/src/event/modules/ngx_win32_select_module.c
diff --git a/vendor/nginx-1.4.4/src/event/ngx_event.c b/vendor/nginx-1.4.7/src/event/ngx_event.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/ngx_event.c
rename to vendor/nginx-1.4.7/src/event/ngx_event.c
diff --git a/vendor/nginx-1.4.4/src/event/ngx_event.h b/vendor/nginx-1.4.7/src/event/ngx_event.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/ngx_event.h
rename to vendor/nginx-1.4.7/src/event/ngx_event.h
diff --git a/vendor/nginx-1.4.4/src/event/ngx_event_accept.c b/vendor/nginx-1.4.7/src/event/ngx_event_accept.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/ngx_event_accept.c
rename to vendor/nginx-1.4.7/src/event/ngx_event_accept.c
diff --git a/vendor/nginx-1.4.4/src/event/ngx_event_busy_lock.c b/vendor/nginx-1.4.7/src/event/ngx_event_busy_lock.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/ngx_event_busy_lock.c
rename to vendor/nginx-1.4.7/src/event/ngx_event_busy_lock.c
diff --git a/vendor/nginx-1.4.4/src/event/ngx_event_busy_lock.h b/vendor/nginx-1.4.7/src/event/ngx_event_busy_lock.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/ngx_event_busy_lock.h
rename to vendor/nginx-1.4.7/src/event/ngx_event_busy_lock.h
diff --git a/vendor/nginx-1.4.4/src/event/ngx_event_connect.c b/vendor/nginx-1.4.7/src/event/ngx_event_connect.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/ngx_event_connect.c
rename to vendor/nginx-1.4.7/src/event/ngx_event_connect.c
diff --git a/vendor/nginx-1.4.4/src/event/ngx_event_connect.h b/vendor/nginx-1.4.7/src/event/ngx_event_connect.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/ngx_event_connect.h
rename to vendor/nginx-1.4.7/src/event/ngx_event_connect.h
diff --git a/vendor/nginx-1.4.4/src/event/ngx_event_mutex.c b/vendor/nginx-1.4.7/src/event/ngx_event_mutex.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/ngx_event_mutex.c
rename to vendor/nginx-1.4.7/src/event/ngx_event_mutex.c
diff --git a/vendor/nginx-1.4.4/src/event/ngx_event_openssl.c b/vendor/nginx-1.4.7/src/event/ngx_event_openssl.c
similarity index 99%
rename from vendor/nginx-1.4.4/src/event/ngx_event_openssl.c
rename to vendor/nginx-1.4.7/src/event/ngx_event_openssl.c
index 62ce12c14..915e604bb 100644
--- a/vendor/nginx-1.4.4/src/event/ngx_event_openssl.c
+++ b/vendor/nginx-1.4.7/src/event/ngx_event_openssl.c
@@ -965,6 +965,7 @@ ngx_ssl_recv(ngx_connection_t *c, u_char *buf, size_t size)
             size -= n;
 
             if (size == 0) {
+                c->read->ready = 1;
                 return bytes;
             }
 
@@ -974,6 +975,10 @@ ngx_ssl_recv(ngx_connection_t *c, u_char *buf, size_t size)
         }
 
         if (bytes) {
+            if (c->ssl->last != NGX_AGAIN) {
+                c->read->ready = 1;
+            }
+
             return bytes;
         }
 
@@ -2224,32 +2229,26 @@ ngx_int_t
 ngx_ssl_get_session_id(ngx_connection_t *c, ngx_pool_t *pool, ngx_str_t *s)
 {
     int           len;
-    u_char       *p, *buf;
+    u_char       *buf;
     SSL_SESSION  *sess;
 
     sess = SSL_get0_session(c->ssl->connection);
-
-    len = i2d_SSL_SESSION(sess, NULL);
-
-    buf = ngx_alloc(len, c->log);
-    if (buf == NULL) {
-        return NGX_ERROR;
+    if (sess == NULL) {
+        s->len = 0;
+        return NGX_OK;
     }
 
+    buf = sess->session_id;
+    len = sess->session_id_length;
+
     s->len = 2 * len;
     s->data = ngx_pnalloc(pool, 2 * len);
     if (s->data == NULL) {
-        ngx_free(buf);
         return NGX_ERROR;
     }
 
-    p = buf;
-    i2d_SSL_SESSION(sess, &p);
-
     ngx_hex_dump(s->data, buf, len);
 
-    ngx_free(buf);
-
     return NGX_OK;
 }
 
diff --git a/vendor/nginx-1.4.4/src/event/ngx_event_openssl.h b/vendor/nginx-1.4.7/src/event/ngx_event_openssl.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/ngx_event_openssl.h
rename to vendor/nginx-1.4.7/src/event/ngx_event_openssl.h
diff --git a/vendor/nginx-1.4.4/src/event/ngx_event_openssl_stapling.c b/vendor/nginx-1.4.7/src/event/ngx_event_openssl_stapling.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/ngx_event_openssl_stapling.c
rename to vendor/nginx-1.4.7/src/event/ngx_event_openssl_stapling.c
diff --git a/vendor/nginx-1.4.4/src/event/ngx_event_pipe.c b/vendor/nginx-1.4.7/src/event/ngx_event_pipe.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/ngx_event_pipe.c
rename to vendor/nginx-1.4.7/src/event/ngx_event_pipe.c
diff --git a/vendor/nginx-1.4.4/src/event/ngx_event_pipe.h b/vendor/nginx-1.4.7/src/event/ngx_event_pipe.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/ngx_event_pipe.h
rename to vendor/nginx-1.4.7/src/event/ngx_event_pipe.h
diff --git a/vendor/nginx-1.4.4/src/event/ngx_event_posted.c b/vendor/nginx-1.4.7/src/event/ngx_event_posted.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/ngx_event_posted.c
rename to vendor/nginx-1.4.7/src/event/ngx_event_posted.c
diff --git a/vendor/nginx-1.4.4/src/event/ngx_event_posted.h b/vendor/nginx-1.4.7/src/event/ngx_event_posted.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/ngx_event_posted.h
rename to vendor/nginx-1.4.7/src/event/ngx_event_posted.h
diff --git a/vendor/nginx-1.4.4/src/event/ngx_event_timer.c b/vendor/nginx-1.4.7/src/event/ngx_event_timer.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/ngx_event_timer.c
rename to vendor/nginx-1.4.7/src/event/ngx_event_timer.c
diff --git a/vendor/nginx-1.4.4/src/event/ngx_event_timer.h b/vendor/nginx-1.4.7/src/event/ngx_event_timer.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/event/ngx_event_timer.h
rename to vendor/nginx-1.4.7/src/event/ngx_event_timer.h
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_access_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_access_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_access_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_access_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_addition_filter_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_addition_filter_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_addition_filter_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_addition_filter_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_auth_basic_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_auth_basic_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_auth_basic_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_auth_basic_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_autoindex_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_autoindex_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_autoindex_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_autoindex_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_browser_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_browser_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_browser_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_browser_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_charset_filter_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_charset_filter_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_charset_filter_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_charset_filter_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_chunked_filter_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_chunked_filter_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_chunked_filter_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_chunked_filter_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_dav_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_dav_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_dav_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_dav_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_degradation_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_degradation_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_degradation_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_degradation_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_empty_gif_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_empty_gif_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_empty_gif_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_empty_gif_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_fastcgi_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_fastcgi_module.c
similarity index 99%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_fastcgi_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_fastcgi_module.c
index f386926da..e2427b4a8 100644
--- a/vendor/nginx-1.4.4/src/http/modules/ngx_http_fastcgi_module.c
+++ b/vendor/nginx-1.4.7/src/http/modules/ngx_http_fastcgi_module.c
@@ -1195,6 +1195,10 @@ ngx_http_fastcgi_reinit_request(ngx_http_request_t *r)
     f->fastcgi_stdout = 0;
     f->large_stderr = 0;
 
+    if (f->split_parts) {
+        f->split_parts->nelts = 0;
+    }
+
     r->state = 0;
 
     return NGX_OK;
@@ -1475,6 +1479,13 @@ ngx_http_fastcgi_process_header(ngx_http_request_t *r)
 
                     rc = ngx_http_parse_header_line(r, &buf, 1);
 
+                    if (rc != NGX_OK) {
+                        ngx_log_error(NGX_LOG_ALERT, r->connection->log, 0,
+                                      "invalid header after joining "
+                                      "FastCGI records");
+                        return NGX_ERROR;
+                    }
+
                     h->key.len = r->header_name_end - r->header_name_start;
                     h->key.data = r->header_name_start;
                     h->key.data[h->key.len] = '\0';
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_flv_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_flv_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_flv_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_flv_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_geo_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_geo_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_geo_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_geo_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_geoip_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_geoip_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_geoip_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_geoip_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_gunzip_filter_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_gunzip_filter_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_gunzip_filter_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_gunzip_filter_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_gzip_filter_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_gzip_filter_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_gzip_filter_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_gzip_filter_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_gzip_static_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_gzip_static_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_gzip_static_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_gzip_static_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_headers_filter_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_headers_filter_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_headers_filter_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_headers_filter_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_image_filter_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_image_filter_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_image_filter_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_image_filter_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_index_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_index_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_index_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_index_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_limit_conn_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_limit_conn_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_limit_conn_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_limit_conn_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_limit_req_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_limit_req_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_limit_req_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_limit_req_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_log_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_log_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_log_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_log_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_map_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_map_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_map_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_map_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_memcached_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_memcached_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_memcached_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_memcached_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_mp4_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_mp4_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_mp4_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_mp4_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_not_modified_filter_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_not_modified_filter_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_not_modified_filter_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_not_modified_filter_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_proxy_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_proxy_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_proxy_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_proxy_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_random_index_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_random_index_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_random_index_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_random_index_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_range_filter_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_range_filter_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_range_filter_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_range_filter_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_realip_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_realip_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_realip_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_realip_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_referer_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_referer_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_referer_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_referer_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_rewrite_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_rewrite_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_rewrite_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_rewrite_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_scgi_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_scgi_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_scgi_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_scgi_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_secure_link_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_secure_link_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_secure_link_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_secure_link_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_split_clients_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_split_clients_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_split_clients_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_split_clients_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_ssi_filter_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_ssi_filter_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_ssi_filter_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_ssi_filter_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_ssi_filter_module.h b/vendor/nginx-1.4.7/src/http/modules/ngx_http_ssi_filter_module.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_ssi_filter_module.h
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_ssi_filter_module.h
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_ssl_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_ssl_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_ssl_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_ssl_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_ssl_module.h b/vendor/nginx-1.4.7/src/http/modules/ngx_http_ssl_module.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_ssl_module.h
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_ssl_module.h
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_static_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_static_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_static_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_static_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_stub_status_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_stub_status_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_stub_status_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_stub_status_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_sub_filter_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_sub_filter_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_sub_filter_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_sub_filter_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_upstream_ip_hash_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_upstream_ip_hash_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_upstream_ip_hash_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_upstream_ip_hash_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_upstream_keepalive_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_upstream_keepalive_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_upstream_keepalive_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_upstream_keepalive_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_upstream_least_conn_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_upstream_least_conn_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_upstream_least_conn_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_upstream_least_conn_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_userid_filter_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_userid_filter_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_userid_filter_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_userid_filter_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_uwsgi_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_uwsgi_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_uwsgi_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_uwsgi_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/ngx_http_xslt_filter_module.c b/vendor/nginx-1.4.7/src/http/modules/ngx_http_xslt_filter_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/ngx_http_xslt_filter_module.c
rename to vendor/nginx-1.4.7/src/http/modules/ngx_http_xslt_filter_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/perl/Makefile.PL b/vendor/nginx-1.4.7/src/http/modules/perl/Makefile.PL
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/perl/Makefile.PL
rename to vendor/nginx-1.4.7/src/http/modules/perl/Makefile.PL
diff --git a/vendor/nginx-1.4.4/src/http/modules/perl/nginx.pm b/vendor/nginx-1.4.7/src/http/modules/perl/nginx.pm
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/perl/nginx.pm
rename to vendor/nginx-1.4.7/src/http/modules/perl/nginx.pm
diff --git a/vendor/nginx-1.4.4/src/http/modules/perl/nginx.xs b/vendor/nginx-1.4.7/src/http/modules/perl/nginx.xs
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/perl/nginx.xs
rename to vendor/nginx-1.4.7/src/http/modules/perl/nginx.xs
diff --git a/vendor/nginx-1.4.4/src/http/modules/perl/ngx_http_perl_module.c b/vendor/nginx-1.4.7/src/http/modules/perl/ngx_http_perl_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/perl/ngx_http_perl_module.c
rename to vendor/nginx-1.4.7/src/http/modules/perl/ngx_http_perl_module.c
diff --git a/vendor/nginx-1.4.4/src/http/modules/perl/ngx_http_perl_module.h b/vendor/nginx-1.4.7/src/http/modules/perl/ngx_http_perl_module.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/perl/ngx_http_perl_module.h
rename to vendor/nginx-1.4.7/src/http/modules/perl/ngx_http_perl_module.h
diff --git a/vendor/nginx-1.4.4/src/http/modules/perl/typemap b/vendor/nginx-1.4.7/src/http/modules/perl/typemap
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/modules/perl/typemap
rename to vendor/nginx-1.4.7/src/http/modules/perl/typemap
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http.c b/vendor/nginx-1.4.7/src/http/ngx_http.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http.c
rename to vendor/nginx-1.4.7/src/http/ngx_http.c
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http.h b/vendor/nginx-1.4.7/src/http/ngx_http.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http.h
rename to vendor/nginx-1.4.7/src/http/ngx_http.h
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_busy_lock.c b/vendor/nginx-1.4.7/src/http/ngx_http_busy_lock.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_busy_lock.c
rename to vendor/nginx-1.4.7/src/http/ngx_http_busy_lock.c
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_busy_lock.h b/vendor/nginx-1.4.7/src/http/ngx_http_busy_lock.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_busy_lock.h
rename to vendor/nginx-1.4.7/src/http/ngx_http_busy_lock.h
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_cache.h b/vendor/nginx-1.4.7/src/http/ngx_http_cache.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_cache.h
rename to vendor/nginx-1.4.7/src/http/ngx_http_cache.h
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_config.h b/vendor/nginx-1.4.7/src/http/ngx_http_config.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_config.h
rename to vendor/nginx-1.4.7/src/http/ngx_http_config.h
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_copy_filter_module.c b/vendor/nginx-1.4.7/src/http/ngx_http_copy_filter_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_copy_filter_module.c
rename to vendor/nginx-1.4.7/src/http/ngx_http_copy_filter_module.c
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_core_module.c b/vendor/nginx-1.4.7/src/http/ngx_http_core_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_core_module.c
rename to vendor/nginx-1.4.7/src/http/ngx_http_core_module.c
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_core_module.h b/vendor/nginx-1.4.7/src/http/ngx_http_core_module.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_core_module.h
rename to vendor/nginx-1.4.7/src/http/ngx_http_core_module.h
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_file_cache.c b/vendor/nginx-1.4.7/src/http/ngx_http_file_cache.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_file_cache.c
rename to vendor/nginx-1.4.7/src/http/ngx_http_file_cache.c
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_header_filter_module.c b/vendor/nginx-1.4.7/src/http/ngx_http_header_filter_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_header_filter_module.c
rename to vendor/nginx-1.4.7/src/http/ngx_http_header_filter_module.c
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_parse.c b/vendor/nginx-1.4.7/src/http/ngx_http_parse.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_parse.c
rename to vendor/nginx-1.4.7/src/http/ngx_http_parse.c
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_parse_time.c b/vendor/nginx-1.4.7/src/http/ngx_http_parse_time.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_parse_time.c
rename to vendor/nginx-1.4.7/src/http/ngx_http_parse_time.c
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_postpone_filter_module.c b/vendor/nginx-1.4.7/src/http/ngx_http_postpone_filter_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_postpone_filter_module.c
rename to vendor/nginx-1.4.7/src/http/ngx_http_postpone_filter_module.c
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_request.c b/vendor/nginx-1.4.7/src/http/ngx_http_request.c
similarity index 99%
rename from vendor/nginx-1.4.4/src/http/ngx_http_request.c
rename to vendor/nginx-1.4.7/src/http/ngx_http_request.c
index c8c5d153f..1be2d463f 100644
--- a/vendor/nginx-1.4.4/src/http/ngx_http_request.c
+++ b/vendor/nginx-1.4.7/src/http/ngx_http_request.c
@@ -423,20 +423,6 @@ ngx_http_wait_request_handler(ngx_event_t *rev)
 
     if (n == NGX_AGAIN) {
 
-#if (NGX_HAVE_DEFERRED_ACCEPT && defined TCP_DEFER_ACCEPT)
-        if (c->listening->deferred_accept
-#if (NGX_HTTP_SSL)
-            && c->ssl == NULL
-#endif
-            )
-        {
-            ngx_log_error(NGX_LOG_INFO, c->log, NGX_ETIMEDOUT,
-                          "client timed out in deferred accept");
-            ngx_http_close_connection(c);
-            return;
-        }
-#endif
-
         if (!rev->timer_set) {
             ngx_add_timer(rev, c->listening->post_accept_timeout);
             ngx_reusable_connection(c, 1);
@@ -635,15 +621,6 @@ ngx_http_ssl_handshake(ngx_event_t *rev)
     if (n == -1) {
         if (err == NGX_EAGAIN) {
 
-#if (NGX_HAVE_DEFERRED_ACCEPT && defined TCP_DEFER_ACCEPT)
-            if (c->listening->deferred_accept) {
-                ngx_log_error(NGX_LOG_INFO, c->log, NGX_ETIMEDOUT,
-                              "client timed out in deferred accept");
-                ngx_http_close_connection(c);
-                return;
-            }
-#endif
-
             if (!rev->timer_set) {
                 ngx_add_timer(rev, c->listening->post_accept_timeout);
                 ngx_reusable_connection(c, 1);
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_request.h b/vendor/nginx-1.4.7/src/http/ngx_http_request.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_request.h
rename to vendor/nginx-1.4.7/src/http/ngx_http_request.h
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_request_body.c b/vendor/nginx-1.4.7/src/http/ngx_http_request_body.c
similarity index 96%
rename from vendor/nginx-1.4.4/src/http/ngx_http_request_body.c
rename to vendor/nginx-1.4.7/src/http/ngx_http_request_body.c
index 2c612311d..e9cf3e930 100644
--- a/vendor/nginx-1.4.4/src/http/ngx_http_request_body.c
+++ b/vendor/nginx-1.4.7/src/http/ngx_http_request_body.c
@@ -150,20 +150,27 @@ ngx_http_read_client_request_body(ngx_http_request_t *r,
                 goto done;
             }
 
-            cl = ngx_chain_get_free_buf(r->pool, &rb->free);
-            if (cl == NULL) {
-                return NGX_HTTP_INTERNAL_SERVER_ERROR;
-            }
+            if (rb->temp_file->file.offset != 0) {
 
-            b = cl->buf;
+                cl = ngx_chain_get_free_buf(r->pool, &rb->free);
+                if (cl == NULL) {
+                    rc = NGX_HTTP_INTERNAL_SERVER_ERROR;
+                    goto done;
+                }
 
-            ngx_memzero(b, sizeof(ngx_buf_t));
+                b = cl->buf;
 
-            b->in_file = 1;
-            b->file_last = rb->temp_file->file.offset;
-            b->file = &rb->temp_file->file;
+                ngx_memzero(b, sizeof(ngx_buf_t));
 
-            rb->bufs = cl;
+                b->in_file = 1;
+                b->file_last = rb->temp_file->file.offset;
+                b->file = &rb->temp_file->file;
+
+                rb->bufs = cl;
+
+            } else {
+                rb->bufs = NULL;
+            }
         }
 
         post_handler(r);
@@ -374,20 +381,26 @@ ngx_http_do_read_client_request_body(ngx_http_request_t *r)
             return NGX_HTTP_INTERNAL_SERVER_ERROR;
         }
 
-        cl = ngx_chain_get_free_buf(r->pool, &rb->free);
-        if (cl == NULL) {
-            return NGX_HTTP_INTERNAL_SERVER_ERROR;
-        }
+        if (rb->temp_file->file.offset != 0) {
+
+            cl = ngx_chain_get_free_buf(r->pool, &rb->free);
+            if (cl == NULL) {
+                return NGX_HTTP_INTERNAL_SERVER_ERROR;
+            }
 
-        b = cl->buf;
+            b = cl->buf;
 
-        ngx_memzero(b, sizeof(ngx_buf_t));
+            ngx_memzero(b, sizeof(ngx_buf_t));
+
+            b->in_file = 1;
+            b->file_last = rb->temp_file->file.offset;
+            b->file = &rb->temp_file->file;
 
-        b->in_file = 1;
-        b->file_last = rb->temp_file->file.offset;
-        b->file = &rb->temp_file->file;
+            rb->bufs = cl;
 
-        rb->bufs = cl;
+        } else {
+            rb->bufs = NULL;
+        }
     }
 
     r->read_event_handler = ngx_http_block_reading;
@@ -842,6 +855,10 @@ ngx_http_request_body_length_filter(ngx_http_request_t *r, ngx_chain_t *in)
 
     for (cl = in; cl; cl = cl->next) {
 
+        if (rb->rest == 0) {
+            break;
+        }
+
         tl = ngx_chain_get_free_buf(r->pool, &rb->free);
         if (tl == NULL) {
             return NGX_HTTP_INTERNAL_SERVER_ERROR;
@@ -936,13 +953,13 @@ ngx_http_request_body_chunked_filter(ngx_http_request_t *r, ngx_chain_t *in)
 
                 if (clcf->client_max_body_size
                     && clcf->client_max_body_size
-                       < r->headers_in.content_length_n + rb->chunked->size)
+                       - r->headers_in.content_length_n < rb->chunked->size)
                 {
                     ngx_log_error(NGX_LOG_ERR, r->connection->log, 0,
                                   "client intended to send too large chunked "
-                                  "body: %O bytes",
-                                  r->headers_in.content_length_n
-                                  + rb->chunked->size);
+                                  "body: %O+%O bytes",
+                                  r->headers_in.content_length_n,
+                                  rb->chunked->size);
 
                     r->lingering_close = 1;
 
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_script.c b/vendor/nginx-1.4.7/src/http/ngx_http_script.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_script.c
rename to vendor/nginx-1.4.7/src/http/ngx_http_script.c
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_script.h b/vendor/nginx-1.4.7/src/http/ngx_http_script.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_script.h
rename to vendor/nginx-1.4.7/src/http/ngx_http_script.h
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_spdy.c b/vendor/nginx-1.4.7/src/http/ngx_http_spdy.c
similarity index 99%
rename from vendor/nginx-1.4.4/src/http/ngx_http_spdy.c
rename to vendor/nginx-1.4.7/src/http/ngx_http_spdy.c
index 7c93dc49a..99afbfca1 100644
--- a/vendor/nginx-1.4.4/src/http/ngx_http_spdy.c
+++ b/vendor/nginx-1.4.7/src/http/ngx_http_spdy.c
@@ -1465,7 +1465,7 @@ static u_char *
 ngx_http_spdy_state_save(ngx_http_spdy_connection_t *sc,
     u_char *pos, u_char *end, ngx_http_spdy_handler_pt handler)
 {
-#if (NGX_DEBUG)
+#if 1
     if (end - pos > NGX_SPDY_STATE_BUFFER_SIZE) {
         ngx_log_error(NGX_LOG_ALERT, sc->connection->log, 0,
                       "spdy state buffer overflow: "
@@ -2626,6 +2626,10 @@ ngx_http_spdy_close_stream(ngx_http_spdy_stream_t *stream, ngx_int_t rc)
         }
     }
 
+    if (sc->stream == stream) {
+        sc->stream = NULL;
+    }
+
     sscf = ngx_http_get_module_srv_conf(sc->http_connection->conf_ctx,
                                         ngx_http_spdy_module);
 
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_spdy.h b/vendor/nginx-1.4.7/src/http/ngx_http_spdy.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_spdy.h
rename to vendor/nginx-1.4.7/src/http/ngx_http_spdy.h
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_spdy_filter_module.c b/vendor/nginx-1.4.7/src/http/ngx_http_spdy_filter_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_spdy_filter_module.c
rename to vendor/nginx-1.4.7/src/http/ngx_http_spdy_filter_module.c
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_spdy_module.c b/vendor/nginx-1.4.7/src/http/ngx_http_spdy_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_spdy_module.c
rename to vendor/nginx-1.4.7/src/http/ngx_http_spdy_module.c
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_spdy_module.h b/vendor/nginx-1.4.7/src/http/ngx_http_spdy_module.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_spdy_module.h
rename to vendor/nginx-1.4.7/src/http/ngx_http_spdy_module.h
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_special_response.c b/vendor/nginx-1.4.7/src/http/ngx_http_special_response.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_special_response.c
rename to vendor/nginx-1.4.7/src/http/ngx_http_special_response.c
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_upstream.c b/vendor/nginx-1.4.7/src/http/ngx_http_upstream.c
similarity index 99%
rename from vendor/nginx-1.4.4/src/http/ngx_http_upstream.c
rename to vendor/nginx-1.4.7/src/http/ngx_http_upstream.c
index 45e2eb7b9..d99d85454 100644
--- a/vendor/nginx-1.4.4/src/http/ngx_http_upstream.c
+++ b/vendor/nginx-1.4.7/src/http/ngx_http_upstream.c
@@ -2456,14 +2456,12 @@ ngx_http_upstream_upgrade(ngx_http_request_t *r, ngx_http_upstream_t *u)
     if (u->peer.connection->read->ready
         || u->buffer.pos != u->buffer.last)
     {
+        ngx_post_event(c->read, &ngx_posted_events);
         ngx_http_upstream_process_upgraded(r, 1, 1);
+        return;
     }
 
-    if (c->read->ready
-        || r->header_in->pos != r->header_in->last)
-    {
-        ngx_http_upstream_process_upgraded(r, 0, 1);
-    }
+    ngx_http_upstream_process_upgraded(r, 0, 1);
 }
 
 
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_upstream.h b/vendor/nginx-1.4.7/src/http/ngx_http_upstream.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_upstream.h
rename to vendor/nginx-1.4.7/src/http/ngx_http_upstream.h
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_upstream_round_robin.c b/vendor/nginx-1.4.7/src/http/ngx_http_upstream_round_robin.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_upstream_round_robin.c
rename to vendor/nginx-1.4.7/src/http/ngx_http_upstream_round_robin.c
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_upstream_round_robin.h b/vendor/nginx-1.4.7/src/http/ngx_http_upstream_round_robin.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_upstream_round_robin.h
rename to vendor/nginx-1.4.7/src/http/ngx_http_upstream_round_robin.h
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_variables.c b/vendor/nginx-1.4.7/src/http/ngx_http_variables.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_variables.c
rename to vendor/nginx-1.4.7/src/http/ngx_http_variables.c
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_variables.h b/vendor/nginx-1.4.7/src/http/ngx_http_variables.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_variables.h
rename to vendor/nginx-1.4.7/src/http/ngx_http_variables.h
diff --git a/vendor/nginx-1.4.4/src/http/ngx_http_write_filter_module.c b/vendor/nginx-1.4.7/src/http/ngx_http_write_filter_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/http/ngx_http_write_filter_module.c
rename to vendor/nginx-1.4.7/src/http/ngx_http_write_filter_module.c
diff --git a/vendor/nginx-1.4.4/src/mail/ngx_mail.c b/vendor/nginx-1.4.7/src/mail/ngx_mail.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/mail/ngx_mail.c
rename to vendor/nginx-1.4.7/src/mail/ngx_mail.c
diff --git a/vendor/nginx-1.4.4/src/mail/ngx_mail.h b/vendor/nginx-1.4.7/src/mail/ngx_mail.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/mail/ngx_mail.h
rename to vendor/nginx-1.4.7/src/mail/ngx_mail.h
diff --git a/vendor/nginx-1.4.4/src/mail/ngx_mail_auth_http_module.c b/vendor/nginx-1.4.7/src/mail/ngx_mail_auth_http_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/mail/ngx_mail_auth_http_module.c
rename to vendor/nginx-1.4.7/src/mail/ngx_mail_auth_http_module.c
diff --git a/vendor/nginx-1.4.4/src/mail/ngx_mail_core_module.c b/vendor/nginx-1.4.7/src/mail/ngx_mail_core_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/mail/ngx_mail_core_module.c
rename to vendor/nginx-1.4.7/src/mail/ngx_mail_core_module.c
diff --git a/vendor/nginx-1.4.4/src/mail/ngx_mail_handler.c b/vendor/nginx-1.4.7/src/mail/ngx_mail_handler.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/mail/ngx_mail_handler.c
rename to vendor/nginx-1.4.7/src/mail/ngx_mail_handler.c
diff --git a/vendor/nginx-1.4.4/src/mail/ngx_mail_imap_handler.c b/vendor/nginx-1.4.7/src/mail/ngx_mail_imap_handler.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/mail/ngx_mail_imap_handler.c
rename to vendor/nginx-1.4.7/src/mail/ngx_mail_imap_handler.c
diff --git a/vendor/nginx-1.4.4/src/mail/ngx_mail_imap_module.c b/vendor/nginx-1.4.7/src/mail/ngx_mail_imap_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/mail/ngx_mail_imap_module.c
rename to vendor/nginx-1.4.7/src/mail/ngx_mail_imap_module.c
diff --git a/vendor/nginx-1.4.4/src/mail/ngx_mail_imap_module.h b/vendor/nginx-1.4.7/src/mail/ngx_mail_imap_module.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/mail/ngx_mail_imap_module.h
rename to vendor/nginx-1.4.7/src/mail/ngx_mail_imap_module.h
diff --git a/vendor/nginx-1.4.4/src/mail/ngx_mail_parse.c b/vendor/nginx-1.4.7/src/mail/ngx_mail_parse.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/mail/ngx_mail_parse.c
rename to vendor/nginx-1.4.7/src/mail/ngx_mail_parse.c
diff --git a/vendor/nginx-1.4.4/src/mail/ngx_mail_pop3_handler.c b/vendor/nginx-1.4.7/src/mail/ngx_mail_pop3_handler.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/mail/ngx_mail_pop3_handler.c
rename to vendor/nginx-1.4.7/src/mail/ngx_mail_pop3_handler.c
diff --git a/vendor/nginx-1.4.4/src/mail/ngx_mail_pop3_module.c b/vendor/nginx-1.4.7/src/mail/ngx_mail_pop3_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/mail/ngx_mail_pop3_module.c
rename to vendor/nginx-1.4.7/src/mail/ngx_mail_pop3_module.c
diff --git a/vendor/nginx-1.4.4/src/mail/ngx_mail_pop3_module.h b/vendor/nginx-1.4.7/src/mail/ngx_mail_pop3_module.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/mail/ngx_mail_pop3_module.h
rename to vendor/nginx-1.4.7/src/mail/ngx_mail_pop3_module.h
diff --git a/vendor/nginx-1.4.4/src/mail/ngx_mail_proxy_module.c b/vendor/nginx-1.4.7/src/mail/ngx_mail_proxy_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/mail/ngx_mail_proxy_module.c
rename to vendor/nginx-1.4.7/src/mail/ngx_mail_proxy_module.c
diff --git a/vendor/nginx-1.4.4/src/mail/ngx_mail_smtp_handler.c b/vendor/nginx-1.4.7/src/mail/ngx_mail_smtp_handler.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/mail/ngx_mail_smtp_handler.c
rename to vendor/nginx-1.4.7/src/mail/ngx_mail_smtp_handler.c
diff --git a/vendor/nginx-1.4.4/src/mail/ngx_mail_smtp_module.c b/vendor/nginx-1.4.7/src/mail/ngx_mail_smtp_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/mail/ngx_mail_smtp_module.c
rename to vendor/nginx-1.4.7/src/mail/ngx_mail_smtp_module.c
diff --git a/vendor/nginx-1.4.4/src/mail/ngx_mail_smtp_module.h b/vendor/nginx-1.4.7/src/mail/ngx_mail_smtp_module.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/mail/ngx_mail_smtp_module.h
rename to vendor/nginx-1.4.7/src/mail/ngx_mail_smtp_module.h
diff --git a/vendor/nginx-1.4.4/src/mail/ngx_mail_ssl_module.c b/vendor/nginx-1.4.7/src/mail/ngx_mail_ssl_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/mail/ngx_mail_ssl_module.c
rename to vendor/nginx-1.4.7/src/mail/ngx_mail_ssl_module.c
diff --git a/vendor/nginx-1.4.4/src/mail/ngx_mail_ssl_module.h b/vendor/nginx-1.4.7/src/mail/ngx_mail_ssl_module.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/mail/ngx_mail_ssl_module.h
rename to vendor/nginx-1.4.7/src/mail/ngx_mail_ssl_module.h
diff --git a/vendor/nginx-1.4.4/src/misc/ngx_cpp_test_module.cpp b/vendor/nginx-1.4.7/src/misc/ngx_cpp_test_module.cpp
similarity index 100%
rename from vendor/nginx-1.4.4/src/misc/ngx_cpp_test_module.cpp
rename to vendor/nginx-1.4.7/src/misc/ngx_cpp_test_module.cpp
diff --git a/vendor/nginx-1.4.4/src/misc/ngx_google_perftools_module.c b/vendor/nginx-1.4.7/src/misc/ngx_google_perftools_module.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/misc/ngx_google_perftools_module.c
rename to vendor/nginx-1.4.7/src/misc/ngx_google_perftools_module.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_aio_read.c b/vendor/nginx-1.4.7/src/os/unix/ngx_aio_read.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_aio_read.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_aio_read.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_aio_read_chain.c b/vendor/nginx-1.4.7/src/os/unix/ngx_aio_read_chain.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_aio_read_chain.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_aio_read_chain.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_aio_write.c b/vendor/nginx-1.4.7/src/os/unix/ngx_aio_write.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_aio_write.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_aio_write.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_aio_write_chain.c b/vendor/nginx-1.4.7/src/os/unix/ngx_aio_write_chain.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_aio_write_chain.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_aio_write_chain.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_alloc.c b/vendor/nginx-1.4.7/src/os/unix/ngx_alloc.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_alloc.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_alloc.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_alloc.h b/vendor/nginx-1.4.7/src/os/unix/ngx_alloc.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_alloc.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_alloc.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_atomic.h b/vendor/nginx-1.4.7/src/os/unix/ngx_atomic.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_atomic.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_atomic.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_channel.c b/vendor/nginx-1.4.7/src/os/unix/ngx_channel.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_channel.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_channel.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_channel.h b/vendor/nginx-1.4.7/src/os/unix/ngx_channel.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_channel.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_channel.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_daemon.c b/vendor/nginx-1.4.7/src/os/unix/ngx_daemon.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_daemon.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_daemon.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_darwin.h b/vendor/nginx-1.4.7/src/os/unix/ngx_darwin.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_darwin.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_darwin.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_darwin_config.h b/vendor/nginx-1.4.7/src/os/unix/ngx_darwin_config.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_darwin_config.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_darwin_config.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_darwin_init.c b/vendor/nginx-1.4.7/src/os/unix/ngx_darwin_init.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_darwin_init.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_darwin_init.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_darwin_sendfile_chain.c b/vendor/nginx-1.4.7/src/os/unix/ngx_darwin_sendfile_chain.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_darwin_sendfile_chain.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_darwin_sendfile_chain.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_errno.c b/vendor/nginx-1.4.7/src/os/unix/ngx_errno.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_errno.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_errno.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_errno.h b/vendor/nginx-1.4.7/src/os/unix/ngx_errno.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_errno.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_errno.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_file_aio_read.c b/vendor/nginx-1.4.7/src/os/unix/ngx_file_aio_read.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_file_aio_read.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_file_aio_read.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_files.c b/vendor/nginx-1.4.7/src/os/unix/ngx_files.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_files.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_files.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_files.h b/vendor/nginx-1.4.7/src/os/unix/ngx_files.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_files.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_files.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_freebsd.h b/vendor/nginx-1.4.7/src/os/unix/ngx_freebsd.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_freebsd.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_freebsd.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_freebsd_config.h b/vendor/nginx-1.4.7/src/os/unix/ngx_freebsd_config.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_freebsd_config.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_freebsd_config.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_freebsd_init.c b/vendor/nginx-1.4.7/src/os/unix/ngx_freebsd_init.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_freebsd_init.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_freebsd_init.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_freebsd_rfork_thread.c b/vendor/nginx-1.4.7/src/os/unix/ngx_freebsd_rfork_thread.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_freebsd_rfork_thread.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_freebsd_rfork_thread.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_freebsd_rfork_thread.h b/vendor/nginx-1.4.7/src/os/unix/ngx_freebsd_rfork_thread.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_freebsd_rfork_thread.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_freebsd_rfork_thread.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_freebsd_sendfile_chain.c b/vendor/nginx-1.4.7/src/os/unix/ngx_freebsd_sendfile_chain.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_freebsd_sendfile_chain.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_freebsd_sendfile_chain.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_gcc_atomic_amd64.h b/vendor/nginx-1.4.7/src/os/unix/ngx_gcc_atomic_amd64.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_gcc_atomic_amd64.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_gcc_atomic_amd64.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_gcc_atomic_ppc.h b/vendor/nginx-1.4.7/src/os/unix/ngx_gcc_atomic_ppc.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_gcc_atomic_ppc.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_gcc_atomic_ppc.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_gcc_atomic_sparc64.h b/vendor/nginx-1.4.7/src/os/unix/ngx_gcc_atomic_sparc64.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_gcc_atomic_sparc64.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_gcc_atomic_sparc64.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_gcc_atomic_x86.h b/vendor/nginx-1.4.7/src/os/unix/ngx_gcc_atomic_x86.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_gcc_atomic_x86.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_gcc_atomic_x86.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_linux.h b/vendor/nginx-1.4.7/src/os/unix/ngx_linux.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_linux.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_linux.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_linux_aio_read.c b/vendor/nginx-1.4.7/src/os/unix/ngx_linux_aio_read.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_linux_aio_read.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_linux_aio_read.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_linux_config.h b/vendor/nginx-1.4.7/src/os/unix/ngx_linux_config.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_linux_config.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_linux_config.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_linux_init.c b/vendor/nginx-1.4.7/src/os/unix/ngx_linux_init.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_linux_init.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_linux_init.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_linux_sendfile_chain.c b/vendor/nginx-1.4.7/src/os/unix/ngx_linux_sendfile_chain.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_linux_sendfile_chain.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_linux_sendfile_chain.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_os.h b/vendor/nginx-1.4.7/src/os/unix/ngx_os.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_os.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_os.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_posix_config.h b/vendor/nginx-1.4.7/src/os/unix/ngx_posix_config.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_posix_config.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_posix_config.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_posix_init.c b/vendor/nginx-1.4.7/src/os/unix/ngx_posix_init.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_posix_init.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_posix_init.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_process.c b/vendor/nginx-1.4.7/src/os/unix/ngx_process.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_process.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_process.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_process.h b/vendor/nginx-1.4.7/src/os/unix/ngx_process.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_process.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_process.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_process_cycle.c b/vendor/nginx-1.4.7/src/os/unix/ngx_process_cycle.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_process_cycle.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_process_cycle.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_process_cycle.h b/vendor/nginx-1.4.7/src/os/unix/ngx_process_cycle.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_process_cycle.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_process_cycle.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_pthread_thread.c b/vendor/nginx-1.4.7/src/os/unix/ngx_pthread_thread.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_pthread_thread.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_pthread_thread.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_readv_chain.c b/vendor/nginx-1.4.7/src/os/unix/ngx_readv_chain.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_readv_chain.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_readv_chain.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_recv.c b/vendor/nginx-1.4.7/src/os/unix/ngx_recv.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_recv.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_recv.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_send.c b/vendor/nginx-1.4.7/src/os/unix/ngx_send.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_send.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_send.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_setaffinity.c b/vendor/nginx-1.4.7/src/os/unix/ngx_setaffinity.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_setaffinity.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_setaffinity.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_setaffinity.h b/vendor/nginx-1.4.7/src/os/unix/ngx_setaffinity.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_setaffinity.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_setaffinity.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_setproctitle.c b/vendor/nginx-1.4.7/src/os/unix/ngx_setproctitle.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_setproctitle.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_setproctitle.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_setproctitle.h b/vendor/nginx-1.4.7/src/os/unix/ngx_setproctitle.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_setproctitle.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_setproctitle.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_shmem.c b/vendor/nginx-1.4.7/src/os/unix/ngx_shmem.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_shmem.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_shmem.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_shmem.h b/vendor/nginx-1.4.7/src/os/unix/ngx_shmem.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_shmem.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_shmem.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_socket.c b/vendor/nginx-1.4.7/src/os/unix/ngx_socket.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_socket.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_socket.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_socket.h b/vendor/nginx-1.4.7/src/os/unix/ngx_socket.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_socket.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_socket.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_solaris.h b/vendor/nginx-1.4.7/src/os/unix/ngx_solaris.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_solaris.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_solaris.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_solaris_config.h b/vendor/nginx-1.4.7/src/os/unix/ngx_solaris_config.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_solaris_config.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_solaris_config.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_solaris_init.c b/vendor/nginx-1.4.7/src/os/unix/ngx_solaris_init.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_solaris_init.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_solaris_init.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_solaris_sendfilev_chain.c b/vendor/nginx-1.4.7/src/os/unix/ngx_solaris_sendfilev_chain.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_solaris_sendfilev_chain.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_solaris_sendfilev_chain.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_sunpro_amd64.il b/vendor/nginx-1.4.7/src/os/unix/ngx_sunpro_amd64.il
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_sunpro_amd64.il
rename to vendor/nginx-1.4.7/src/os/unix/ngx_sunpro_amd64.il
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_sunpro_atomic_sparc64.h b/vendor/nginx-1.4.7/src/os/unix/ngx_sunpro_atomic_sparc64.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_sunpro_atomic_sparc64.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_sunpro_atomic_sparc64.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_sunpro_sparc64.il b/vendor/nginx-1.4.7/src/os/unix/ngx_sunpro_sparc64.il
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_sunpro_sparc64.il
rename to vendor/nginx-1.4.7/src/os/unix/ngx_sunpro_sparc64.il
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_sunpro_x86.il b/vendor/nginx-1.4.7/src/os/unix/ngx_sunpro_x86.il
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_sunpro_x86.il
rename to vendor/nginx-1.4.7/src/os/unix/ngx_sunpro_x86.il
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_thread.h b/vendor/nginx-1.4.7/src/os/unix/ngx_thread.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_thread.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_thread.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_time.c b/vendor/nginx-1.4.7/src/os/unix/ngx_time.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_time.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_time.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_time.h b/vendor/nginx-1.4.7/src/os/unix/ngx_time.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_time.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_time.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_udp_recv.c b/vendor/nginx-1.4.7/src/os/unix/ngx_udp_recv.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_udp_recv.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_udp_recv.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_user.c b/vendor/nginx-1.4.7/src/os/unix/ngx_user.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_user.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_user.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_user.h b/vendor/nginx-1.4.7/src/os/unix/ngx_user.h
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_user.h
rename to vendor/nginx-1.4.7/src/os/unix/ngx_user.h
diff --git a/vendor/nginx-1.4.4/src/os/unix/ngx_writev_chain.c b/vendor/nginx-1.4.7/src/os/unix/ngx_writev_chain.c
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/ngx_writev_chain.c
rename to vendor/nginx-1.4.7/src/os/unix/ngx_writev_chain.c
diff --git a/vendor/nginx-1.4.4/src/os/unix/rfork_thread.S b/vendor/nginx-1.4.7/src/os/unix/rfork_thread.S
similarity index 100%
rename from vendor/nginx-1.4.4/src/os/unix/rfork_thread.S
rename to vendor/nginx-1.4.7/src/os/unix/rfork_thread.S
