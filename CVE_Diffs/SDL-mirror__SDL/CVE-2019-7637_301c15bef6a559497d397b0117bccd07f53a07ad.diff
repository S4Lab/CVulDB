SDL-mirror__SDL
commit 301c15bef6a559497d397b0117bccd07f53a07ad
Author:     Ozkan Sezer <sezeroz@gmail.com>
AuthorDate: Fri Aug 2 00:35:05 2019 +0300
Commit:     Ozkan Sezer <sezeroz@gmail.com>
CommitDate: Fri Aug 2 00:35:05 2019 +0300

    fix copy+paste mistakes in commit 9b0e5c555c0f (CVE-2019-7637 fix):
    
    http://hg.libsdl.org/SDL/rev/9b0e5c555c0f made copy+paste mistakes which
    resulted in windows versions failing to set video mode.
    
    --HG--
    branch : SDL-1.2

diff --git a/src/video/gapi/SDL_gapivideo.c b/src/video/gapi/SDL_gapivideo.c
index 8a0648536..220260ab5 100644
--- a/src/video/gapi/SDL_gapivideo.c
+++ b/src/video/gapi/SDL_gapivideo.c
@@ -733,7 +733,7 @@ SDL_Surface *GAPI_SetVideoMode(_THIS, SDL_Surface *current,
 	video->w = gapi->w = width;
 	video->h = gapi->h = height;
 	video->pitch = SDL_CalculatePitch(video); 
-	if (!current->pitch) {
+	if (!video->pitch) {
 		return(NULL);
 	}
 
diff --git a/src/video/windib/SDL_dibvideo.c b/src/video/windib/SDL_dibvideo.c
index 4663bb12f..81563c02f 100644
--- a/src/video/windib/SDL_dibvideo.c
+++ b/src/video/windib/SDL_dibvideo.c
@@ -675,7 +675,7 @@ SDL_Surface *DIB_SetVideoMode(_THIS, SDL_Surface *current,
 	video->w = width;
 	video->h = height;
 	video->pitch = SDL_CalculatePitch(video);
-	if (!current->pitch) {
+	if (!video->pitch) {
 		return(NULL);
 	}
 
diff --git a/src/video/windx5/SDL_dx5video.c b/src/video/windx5/SDL_dx5video.c
index 39fc4fc37..ec387fb97 100644
--- a/src/video/windx5/SDL_dx5video.c
+++ b/src/video/windx5/SDL_dx5video.c
@@ -1127,7 +1127,7 @@ SDL_Surface *DX5_SetVideoMode(_THIS, SDL_Surface *current,
 		video->w = width;
 		video->h = height;
 		video->pitch = SDL_CalculatePitch(video);
-		if (!current->pitch) {
+		if (!video->pitch) {
 			return(NULL);
 		}
 
