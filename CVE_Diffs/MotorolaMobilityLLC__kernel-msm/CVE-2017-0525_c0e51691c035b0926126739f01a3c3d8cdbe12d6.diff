MotorolaMobilityLLC__kernel-msm
commit c0e51691c035b0926126739f01a3c3d8cdbe12d6
Author:     Biswajit Paul <biswajitpaul@codeaurora.org>
AuthorDate: Tue Feb 14 14:36:44 2017 +0530
Commit:     a7301c <a7301c@motorola.com>
CommitDate: Tue Dec 5 10:42:30 2017 -0600

    msm: ipa: Prevent multiple header deletion from user space
    
    An IPA header or processing context can be added once
    and later deleted once from user space.
    Multiple deletion may cause invalid state of the headers
    software cache.
    
    Mot-CRs-fixed:(CR)
    CVE-Fixed:CVE-2017-0525
    Bug: 33139056
    Change-Id: Ic0b8472b7fd8a76233a007d90c832af726184574
    CRs-fixed: 1097714
    Signed-off-by: Ghanim Fodi <gfodi@codeaurora.org>
    Signed-off-by: Biswajit Paul <biswajitpaul@codeaurora.org>
    Signed-off-by: Amarendra Reddy <amarenr@motorola.com>
    Reviewed-on: https://gerrit.mot.com/950732
    SLTApproved: Slta Waiver <sltawvr@motorola.com>
    SME-Granted: SME Approvals Granted
    Tested-by: Jira Key <jirakey@motorola.com>
    Reviewed-by: Igor Kovalenko <igork@motorola.com>
    Submit-Approved: Jira Key <jirakey@motorola.com>

diff --git a/drivers/platform/msm/ipa/ipa_v3/ipa_hdr.c b/drivers/platform/msm/ipa/ipa_v3/ipa_hdr.c
index f20f75dbda60..48601517da2d 100644
--- a/drivers/platform/msm/ipa/ipa_v3/ipa_hdr.c
+++ b/drivers/platform/msm/ipa/ipa_v3/ipa_hdr.c
@@ -1142,6 +1142,10 @@ int ipa3_get_hdr(struct ipa_ioc_get_hdr *lookup)
 	return result;
 }
 
+/**
+ * __ipa3_release_hdr() - drop reference to header and cause
+}
+
 /**
  * __ipa3_release_hdr() - drop reference to header and cause
  * deletion if reference count permits
