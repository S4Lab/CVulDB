MotorolaMobilityLLC__kernel-msm
commit f920a6816aeaed561364fa6702a01d0a3a872702
Author:     Vineet Angadi V <vineetv@motorola.com>
AuthorDate: Thu Nov 10 12:24:41 2016 +0530
Commit:     a7301c <a7301c@motorola.com>
CommitDate: Thu Mar 16 13:58:45 2017 -0500

    vmlinux.lds.h:  initconst adjustments for relocatable data
    
    The sys_call_table is writable leading to potential arbitrary code
    execution.The fix is designed to mark the sys_call_table const to be
    placed in the .rodata section. This will cause attempts to modify the
    table to fail when strict page permissions are in place preventing the
    potential arbitrary code execution.
    Mot-CRs-fixed: (CR)
    CVE-Fixed: CVE-2015-8967
    
    Change-Id: I5cf920dd1915080957aeeeb9fdac953dd633c58e
    Signed-off-by: Vineet Angadi V <vineetv@motorola.com>
    Reviewed-on: https://gerrit.mot.com/918679
    SLTApproved: Slta Waiver <sltawvr@motorola.com>
    SME-Granted: SME Approvals Granted
    Tested-by: Jira Key <jirakey@motorola.com>
    Reviewed-by: Vijayakumar Gn <vijaygn@motorola.com>
    Reviewed-by: Igor Kovalenko <igork@motorola.com>
    Submit-Approved: Jira Key <jirakey@motorola.com>

diff --git a/include/asm-generic/vmlinux.lds.h b/include/asm-generic/vmlinux.lds.h
index ac78910d7416..aff5a8b4d5c9 100644
--- a/include/asm-generic/vmlinux.lds.h
+++ b/include/asm-generic/vmlinux.lds.h
@@ -234,6 +234,7 @@
 	.rodata           : AT(ADDR(.rodata) - LOAD_OFFSET) {		\
 		VMLINUX_SYMBOL(__start_rodata) = .;			\
 		*(.rodata) *(.rodata.*)					\
+		*(.data.rel.ro.local* .gnu.linkonce.d.rel.ro.local.*) *(.data.rel.ro .data.rel.ro.* .gnu.linkonce.d.rel.ro.*) \
 		*(__vermagic)		/* Kernel version magic */	\
 		. = ALIGN(8);						\
 		VMLINUX_SYMBOL(__start___tracepoints_ptrs) = .;		\
