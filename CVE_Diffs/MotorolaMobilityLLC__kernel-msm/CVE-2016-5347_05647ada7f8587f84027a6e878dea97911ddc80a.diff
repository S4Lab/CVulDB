MotorolaMobilityLLC__kernel-msm
commit 05647ada7f8587f84027a6e878dea97911ddc80a
Author:     Xiaojun Sang <xsang@codeaurora.org>
AuthorDate: Wed Mar 22 15:08:29 2017 +0530
Commit:     PDO SCM Team <hudsoncm@motorola.com>
CommitDate: Wed May 31 08:43:50 2017 -0500

    ASoC: soc: msm: initialize buffer to prevent kernel data
    leakage
    
    To prevent potential kernel stack data leakage, initialize
    channel_map[].
    
    CVE-fixed: CVE-2016-5347
    Bug-Id: A-35394329
    CRs-Fixed: 1100878
    Change-Id: I7b81cea20485bc7514551672bb54c7fd455049e3
    Signed-off-by: Xiaojun Sang <xsang@codeaurora.org>
    ----
    Reviewed-on: https://gerrit.mot.com/966235
    SLTApproved: Slta Waiver <sltawvr@motorola.com>
    SME-Granted: SME Approvals Granted
    Tested-by: Jira Key <jirakey@motorola.com>
    Reviewed-by: Vrushali Prakash Bhosale <wkvq37@motorola.com>
    Reviewed-by: Igor Kovalenko <igork@motorola.com>
    Submit-Approved: Jira Key <jirakey@motorola.com>
    (cherry picked from commit c1b4761cda7658c202ff3ee29c96c7e7a18acbd9)
    Reviewed-on: https://gerrit.mot.com/980934

diff --git a/sound/soc/msm/qdsp6v2/msm-qti-pp-config.c b/sound/soc/msm/qdsp6v2/msm-qti-pp-config.c
index 00d16ff10a84..5635b25b954e 100644
--- a/sound/soc/msm/qdsp6v2/msm-qti-pp-config.c
+++ b/sound/soc/msm/qdsp6v2/msm-qti-pp-config.c
@@ -469,7 +469,7 @@ static int msm_qti_pp_set_auxpcm_lb_vol_mixer(struct snd_kcontrol *kcontrol,
 static int msm_qti_pp_get_channel_map_mixer(struct snd_kcontrol *kcontrol,
 					    struct snd_ctl_elem_value *ucontrol)
 {
-	char channel_map[PCM_FORMAT_MAX_NUM_CHANNEL];
+	char channel_map[PCM_FORMAT_MAX_NUM_CHANNEL] = {0};
 	int i;
 
 	adm_get_multi_ch_map(channel_map, ADM_PATH_PLAYBACK);
