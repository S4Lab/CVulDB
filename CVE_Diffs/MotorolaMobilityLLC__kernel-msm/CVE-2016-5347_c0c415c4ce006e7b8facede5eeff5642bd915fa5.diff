MotorolaMobilityLLC__kernel-msm
commit c0c415c4ce006e7b8facede5eeff5642bd915fa5
Author:     Xiaojun Sang <xsang@codeaurora.org>
AuthorDate: Wed Mar 22 15:08:29 2017 +0530
Commit:     Neeraj Kumar <neerajk@motorola.com>
CommitDate: Tue Mar 28 03:45:46 2017 -0500

    ASoC: soc: msm: initialize buffer to prevent kernel data leakage
    
    To prevent potential kernel stack data leakage, initialize
    channel_map[].
    
    CVE-fixed: CVE-2016-5347
    CRs-Fixed: 1100878
    Change-Id: I7b81cea20485bc7514551672bb54c7fd455049e3
    Signed-off-by: Xiaojun Sang <xsang@codeaurora.org>
    ----
    Reviewed-on: https://gerrit.mot.com/966229
    SLTApproved: Slta Waiver <sltawvr@motorola.com>
    SME-Granted: SME Approvals Granted
    Tested-by: Jira Key <jirakey@motorola.com>
    Reviewed-by: Vrushali Prakash Bhosale <wkvq37@motorola.com>
    Reviewed-by: Igor Kovalenko <igork@motorola.com>
    Submit-Approved: Jira Key <jirakey@motorola.com>

diff --git a/sound/soc/msm/qdsp6v2/msm-qti-pp-config.c b/sound/soc/msm/qdsp6v2/msm-qti-pp-config.c
index be18ad0ca560..f3564153a3c2 100644
--- a/sound/soc/msm/qdsp6v2/msm-qti-pp-config.c
+++ b/sound/soc/msm/qdsp6v2/msm-qti-pp-config.c
@@ -484,7 +484,7 @@ static int msm_qti_pp_set_auxpcm_lb_vol_mixer(struct snd_kcontrol *kcontrol,
 static int msm_qti_pp_get_channel_map_mixer(struct snd_kcontrol *kcontrol,
 					    struct snd_ctl_elem_value *ucontrol)
 {
-	char channel_map[PCM_FORMAT_MAX_NUM_CHANNEL];
+	char channel_map[PCM_FORMAT_MAX_NUM_CHANNEL] = {0};
 	int i;
 
 	adm_get_multi_ch_map(channel_map);
