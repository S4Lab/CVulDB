MotorolaMobilityLLC__kernel-msm
commit 43cfe2a2d08d3b8708896c887b6c43099243a758
Author:     Biswajit Paul <biswajitpaul@codeaurora.org>
AuthorDate: Tue Feb 14 14:36:44 2017 +0530
Commit:     lulu2 <lulu2@lenovo.com>
CommitDate: Wed Jun 6 12:10:59 2018 +0800

    msm: ipa: Prevent multiple header deletion from user space
    
    An IPA header or processing context can be added once
    and later deleted once from user space.
    Multiple deletion may cause invalid state of the headers
    software cache.
    
    Mot-CRs-fixed:(CR)
    CVE-Fixed:CVE-2017-0525
    Bug: 33139056
    Change-Id: Ic0b8472b7fd8a76233a007d90c832af726184574
    CRs-fixed: 1097714
    Signed-off-by: Ghanim Fodi <gfodi@codeaurora.org>
    Signed-off-by: Biswajit Paul <biswajitpaul@codeaurora.org>
    Signed-off-by: Amarendra Reddy <amarenr@motorola.com>
    Reviewed-on: https://gerrit.mot.com/950732
    SLTApproved: Slta Waiver <sltawvr@motorola.com>
    SME-Granted: SME Approvals Granted
    Tested-by: Jira Key <jirakey@motorola.com>
    Reviewed-by: Igor Kovalenko <igork@motorola.com>
    Submit-Approved: Jira Key <jirakey@motorola.com>

diff --git a/drivers/platform/msm/ipa/ipa_v3/ipa_hdr.c b/drivers/platform/msm/ipa/ipa_v3/ipa_hdr.c
index 36206dc63af5..bc7001ef5495 100644
--- a/drivers/platform/msm/ipa/ipa_v3/ipa_hdr.c
+++ b/drivers/platform/msm/ipa/ipa_v3/ipa_hdr.c
@@ -1156,6 +1156,10 @@ int ipa3_get_hdr(struct ipa_ioc_get_hdr *lookup)
 	return result;
 }
 
+/**
+ * __ipa3_release_hdr() - drop reference to header and cause
+}
+
 /**
  * __ipa3_release_hdr() - drop reference to header and cause
  * deletion if reference count permits
