MotorolaMobilityLLC__kernel-msm
commit c1ead8d8f6c1d4702cfc943be70500505c76ddbf
Author:     Vineet Angadi V <vineetv@motorola.com>
AuthorDate: Thu Nov 10 12:13:08 2016 +0530
Commit:     a7301c <a7301c@motorola.com>
CommitDate: Mon Nov 21 09:47:22 2016 -0600

    vmlinux.lds.h:  initconst adjustments for relocatable data
    
    The sys_call_table is writable leading to potential arbitrary code
    execution.The fix is designed to mark the sys_call_table const to be
    placed in the .rodata section. This will cause attempts to modify the
    table to fail when strict page permissions are in place preventing the
    potential arbitrary code execution.
    Mot-CRs-fixed: (CR)
    CVE-Fixed: CVE-2015-8967
    
    Change-Id: I9c2fb7730d8078f1cbbe68118e2e91366d8836b6
    Signed-off-by: Vineet Angadi V <vineetv@motorola.com>
    Reviewed-on: https://gerrit.mot.com/918674
    SLTApproved: Slta Waiver <sltawvr@motorola.com>
    SME-Granted: SME Approvals Granted
    Tested-by: Jira Key <jirakey@motorola.com>
    Reviewed-by: Vijayakumar Gn <vijaygn@motorola.com>
    Reviewed-by: Igor Kovalenko <igork@motorola.com>
    Submit-Approved: Jira Key <jirakey@motorola.com>

diff --git a/include/asm-generic/vmlinux.lds.h b/include/asm-generic/vmlinux.lds.h
index 0dc46eb3fd28..eece69b3b76e 100644
--- a/include/asm-generic/vmlinux.lds.h
+++ b/include/asm-generic/vmlinux.lds.h
@@ -248,6 +248,7 @@
 	.rodata           : AT(ADDR(.rodata) - LOAD_OFFSET) {		\
 		VMLINUX_SYMBOL(__start_rodata) = .;			\
 		*(.rodata) *(.rodata.*)					\
+		*(.data.rel.ro.local* .gnu.linkonce.d.rel.ro.local.*) *(.data.rel.ro .data.rel.ro.* .gnu.linkonce.d.rel.ro.*) \
 		*(__vermagic)		/* Kernel version magic */	\
 		. = ALIGN(8);						\
 		VMLINUX_SYMBOL(__start___tracepoints_ptrs) = .;		\
