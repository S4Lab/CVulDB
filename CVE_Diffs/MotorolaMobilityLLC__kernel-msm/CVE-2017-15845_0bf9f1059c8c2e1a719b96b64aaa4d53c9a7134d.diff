MotorolaMobilityLLC__kernel-msm
commit 0bf9f1059c8c2e1a719b96b64aaa4d53c9a7134d
Author:     Sarada Prasanna Garnayak <sgarna@codeaurora.org>
AuthorDate: Tue Jul 11 13:01:19 2017 +0530
Commit:     PDO SCM Team <hudsoncm@motorola.com>
CommitDate: Sat Feb 3 02:35:02 2018 -0600

    wcnss: fix the potential buffer flow issue in firmware setup
    
    Add the check against negative or invalid firmware size passed
    by the userspace thread in firmware setup sysfs write operation.
    Update the datatype of the variable which holds the firmware size
    passed by userspace thread during firmware setup and WLAN calibration
    data update process.
    
    Mot-CRs-fixed:(CR)
    CVE-Fixed:CVE-2017-15845
    
    CRs-Fixed: 2072966
    Change-Id: I8c84ad0d1b0a5f44a39c9c5b228734b0f693e8dd
    Signed-off-by: Sarada Prasanna Garnayak <sgarna@codeaurora.org>
    Signed-off-by: Smaran Am <smaran@motorola.com>
    Reviewed-on: https://gerrit.mot.com/1106160
    SME-Granted: SME Approvals Granted
    SLTApproved: Slta Waiver
    Tested-by: Jira Key
    Reviewed-by: Vineet Angadi <vineetv@motorola.com>
    Reviewed-by: Bin Liu <liubin7@motorola.com>
    Reviewed-by: Binsheng Que <quebs2@motorola.com>
    Reviewed-by: Hujun Liao <liaohj@motorola.com>
    Submit-Approved: Jira Key

diff --git a/drivers/net/wireless/wcnss/wcnss_wlan.c b/drivers/net/wireless/wcnss/wcnss_wlan.c
index a20b4ba2da97..ff050bee78f5 100644
--- a/drivers/net/wireless/wcnss/wcnss_wlan.c
+++ b/drivers/net/wireless/wcnss/wcnss_wlan.c
@@ -397,7 +397,7 @@ static struct {
 	int	user_cal_read;
 	int	user_cal_available;
 	u32	user_cal_rcvd;
-	int	user_cal_exp_size;
+	u32	user_cal_exp_size;
 	int	iris_xo_mode_set;
 	int	fw_vbatt_state;
 	char	wlan_nv_macAddr[WLAN_MAC_ADDR_SIZE];
