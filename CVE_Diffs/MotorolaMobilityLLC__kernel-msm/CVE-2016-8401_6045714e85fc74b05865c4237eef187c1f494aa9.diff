MotorolaMobilityLLC__kernel-msm
commit 6045714e85fc74b05865c4237eef187c1f494aa9
Author:     Ashwin Pathmudi <jfxr63@motorola.com>
AuthorDate: Mon Jan 30 16:03:59 2017 -0200
Commit:     Marina Silva <mgsilva@motorola.com>
CommitDate: Wed Feb 15 11:33:26 2017 +0000

    ion: Change format specifier %p to %pK
    
    The format specifier %p can leak kernel addresses.
    The fix is designed to use %pK instead of %p, which also
    evaluates whether kptr_restrict is set.
    
    Change-Id: Ic26e495263ab55cf2c5451f2f7fc25ed16c9588c
    CVE-Fixed: CVE-2016-8401

diff --git a/drivers/staging/android/ion/ion.c b/drivers/staging/android/ion/ion.c
index e8e2428fa863..b003d57aeaf2 100644
--- a/drivers/staging/android/ion/ion.c
+++ b/drivers/staging/android/ion/ion.c
@@ -746,11 +746,11 @@ static int ion_debug_client_show(struct seq_file *s, void *unused)
 		struct ion_handle *handle = rb_entry(n, struct ion_handle,
 						     node);
 
-		seq_printf(s, "%16.16s: %16zx : %16d : %12p",
-				handle->buffer->heap->name,
-				handle->buffer->size,
-				atomic_read(&handle->ref.refcount),
-				handle->buffer);
+		seq_printf(s, "%16.16s: %16zx : %16d : %12pK",
+			   handle->buffer->heap->name,
+			   handle->buffer->size,
+			   atomic_read(&handle->ref.refcount),
+			   handle->buffer);
 
 		seq_printf(s, "\n");
 	}
