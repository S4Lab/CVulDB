MotorolaMobilityLLC__kernel-msm
commit a70fb86e933ad44d0356de329086fbe2076d3b98
Author:     Archana Obannagari <aobann@codeaurora.org>
AuthorDate: Fri Sep 8 20:35:28 2017 +0530
Commit:     PDO SCM Team <hudsoncm@motorola.com>
CommitDate: Fri Feb 9 01:53:50 2018 -0600

    msm: kgsl: Fixing an uninitialized variable in _gpuobj_map_useraddr()
    
    Uninitalized kernel variable passes to userspace, it may have data
    from stack. To avoid data leak from kernel to userspace initializes
    struct kgsl_gpuobj_import_useraddr to zero.
    
    Mot-CRs-fixed: (CR)
    CVE-fixed: CVE-2017-14891
    CRs-Fixed: 2096006
    Change-Id: Ib79b030cd5e3edd7279632af20dc3fac95eb73d4
    Signed-off-by: Archana Obannagari <aobann@codeaurora.org>
    Signed-off-by: Ashwin Pathmudi <jfxr63@motorola.com>
    Reviewed-on: https://gerrit.mot.com/1121838
    SME-Granted: SME Approvals Granted
    SLTApproved: Slta Waiver
    Tested-by: Jira Key
    Reviewed-by: Bang Nguyen <bangnguyen@motorola.com>
    Reviewed-by: Shi-Yong Li <a22381@motorola.com>
    Reviewed-by: Shuo Yan <shuoyan@motorola.com>
    Reviewed-by: Igor Kovalenko <igork@motorola.com>
    Submit-Approved: Jira Key

diff --git a/drivers/gpu/msm/kgsl.c b/drivers/gpu/msm/kgsl.c
index d14b52a89333..dd9e73f8c836 100644
--- a/drivers/gpu/msm/kgsl.c
+++ b/drivers/gpu/msm/kgsl.c
@@ -2184,7 +2184,7 @@ static long _gpuobj_map_useraddr(struct kgsl_device *device,
 		struct kgsl_mem_entry *entry,
 		struct kgsl_gpuobj_import *param)
 {
-	struct kgsl_gpuobj_import_useraddr useraddr;
+	struct kgsl_gpuobj_import_useraddr useraddr = {0};
 	int ret;
 
 	param->flags &= KGSL_MEMFLAGS_GPUREADONLY
