MotorolaMobilityLLC__kernel-msm
commit c77782c6d8267f36da730de373e6e5ef189ea056
Author:     Mark Rutland <mark.rutland@arm.com>
AuthorDate: Thu Jan 8 11:42:59 2015 +0000
Commit:     a7301c <a7301c@motorola.com>
CommitDate: Mon Nov 21 09:47:22 2016 -0600

    arm64: make sys_call_table const
    
    As with x86, mark the sys_call_table const such that it will be placed
    in the .rodata section. This will cause attempts to modify the table
    (accidental or deliberate) to fail when strict page permissions are in
    place. In the absence of strict page permissions, there should be no
    functional change.
    Mot-CRs-fixed: (CR)
    CVE-Fixed: CVE-2015-8967
    
    Change-Id: I6d106c716b0215579c81ee061a3ef793890b2756
    Signed-off-by: Mark Rutland <mark.rutland@arm.com>
    Acked-by: Will Deacon <will.deacon@arm.com>
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    Signed-off-by: Vineet Angadi V <vineetv@motorola.com>
    Reviewed-on: https://gerrit.mot.com/918187
    SLTApproved: Slta Waiver <sltawvr@motorola.com>
    SME-Granted: SME Approvals Granted
    Tested-by: Jira Key <jirakey@motorola.com>
    Reviewed-by: Vijayakumar Gn <vijaygn@motorola.com>
    Reviewed-by: Igor Kovalenko <igork@motorola.com>
    Submit-Approved: Jira Key <jirakey@motorola.com>

diff --git a/arch/arm64/kernel/sys.c b/arch/arm64/kernel/sys.c
index 3fa98ff14f0e..df20b7918854 100644
--- a/arch/arm64/kernel/sys.c
+++ b/arch/arm64/kernel/sys.c
@@ -50,7 +50,7 @@ asmlinkage long sys_mmap(unsigned long addr, unsigned long len,
  * The sys_call_table array must be 4K aligned to be accessible from
  * kernel/entry.S.
  */
-void *sys_call_table[__NR_syscalls] __aligned(4096) = {
+void * const sys_call_table[__NR_syscalls] __aligned(4096) = {
 	[0 ... __NR_syscalls - 1] = sys_ni_syscall,
 #include <asm/unistd.h>
 };
