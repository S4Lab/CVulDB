MotorolaMobilityLLC__kernel-msm
commit caea77cd2abaab82da0e44e061f002bd26c75a9c
Author:     Vineet Angadi <vineetv@motorola.com>
AuthorDate: Wed Nov 16 08:53:54 2016 -0600
Commit:     Marina Silva <mgsilva@motorola.com>
CommitDate: Mon Feb 13 11:28:30 2017 +0000

    The format specifier %p can leak kernel addresses while not valuing the
    kptr_restrict system settings.
    The fix is designed to use %pK instead of %p, which also evaluates
    whether kptr_restrict is set.
    
    Mot-CRs-fixed: (CR)
    CVE-Fixed: CVE-2016-6753
    
    Change-Id: I7fbfbbf4d1d20dc7b18b77dacf6707b418a4c75a

diff --git a/kernel/cgroup.c b/kernel/cgroup.c
index 05b36e7b9e6b..1e2c3588b990 100644
--- a/kernel/cgroup.c
+++ b/kernel/cgroup.c
@@ -5449,7 +5449,7 @@ static int cgroup_css_links_read(struct cgroup *cont,
 		struct css_set *cg = link->cg;
 		struct task_struct *task;
 		int count = 0;
-		seq_printf(seq, "css_set %p\n", cg);
+		seq_printf(seq, "css_set %pK\n", cg);
 		list_for_each_entry(task, &cg->tasks, cg_list) {
 			if (count++ > MAX_TASKS_SHOWN_PER_CSS) {
 				seq_puts(seq, "  ...\n");
