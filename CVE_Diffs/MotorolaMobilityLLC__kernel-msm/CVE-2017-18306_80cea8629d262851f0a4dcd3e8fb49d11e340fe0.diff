MotorolaMobilityLLC__kernel-msm
commit 80cea8629d262851f0a4dcd3e8fb49d11e340fe0
Author:     Annamraj <annamraj@codeaurora.org>
AuthorDate: Wed Apr 11 10:42:13 2018 +0530
Commit:     Srikanth A R <arsrikan@motorola.com>
CommitDate: Fri Jul 27 01:37:32 2018 -0500

    msm: camera: Fix for Possible information leak issue
    
    Fix for possible information leak issue because of unintialised variable
    Which can be accesed from userspace in camera fd driver
    
    Bug-id: A-73889358
    CVE-fixed: CVE-2017-18306
    CRs-fixed: 2216399
    Mot-CRs-fixed: (CR)
    
    Change-Id: I4552c4829e9532d848e46fd123316b26105e310e
    
    Signed-off-by: Annamraj <annamraj@codeaurora.org>
    Signed-off-by: Srikanth A R <arsrikan@motorola.com>
    Change-Id: Ifa903480a570f11b6657af940f8dbb284d795621
    Reviewed-on: https://gerrit.mot.com/1214773
    SLTApproved: Slta Waiver
    SME-Granted: SME Approvals Granted
    Tested-by: Jira Key
    Reviewed-by: Ravikumar Vembu <raviv@motorola.com>
    Submit-Approved: Jira Key

diff --git a/drivers/media/platform/msm/camera_v2/fd/msm_fd_dev.c b/drivers/media/platform/msm/camera_v2/fd/msm_fd_dev.c
index 9437b775c2c2..6bfd761c1a97 100644
--- a/drivers/media/platform/msm/camera_v2/fd/msm_fd_dev.c
+++ b/drivers/media/platform/msm/camera_v2/fd/msm_fd_dev.c
@@ -1,4 +1,4 @@
-/* Copyright (c) 2014-2016, The Linux Foundation. All rights reserved.
+/* Copyright (c) 2014-2018, The Linux Foundation. All rights reserved.
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License version 2 and
@@ -441,7 +441,7 @@ static int msm_fd_open(struct file *file)
 	}
 
 	ctx->mem_pool.fd_device = ctx->fd_device;
-	ctx->stats = vmalloc(sizeof(*ctx->stats) * MSM_FD_MAX_RESULT_BUFS);
+	ctx->stats = vzalloc(sizeof(*ctx->stats) * MSM_FD_MAX_RESULT_BUFS);
 	if (!ctx->stats) {
 		dev_err(device->dev, "No memory for face statistics\n");
 		ret = -ENOMEM;
