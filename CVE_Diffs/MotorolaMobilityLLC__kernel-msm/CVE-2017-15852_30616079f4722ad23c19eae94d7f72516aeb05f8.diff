MotorolaMobilityLLC__kernel-msm
commit 30616079f4722ad23c19eae94d7f72516aeb05f8
Author:     Venu Yeshala <vyeshala@codeaurora.org>
AuthorDate: Mon May 29 14:20:29 2017 +0530
Commit:     PDO SCM Team <hudsoncm@motorola.com>
CommitDate: Sat Feb 3 05:25:41 2018 -0600

    msm: camera: isp: Avoid information leak in ISPIF
    
    Change the format specifier in a debug print for ISPIF base
    address to avoid information leak.
    
    Bug-id: A-36730614
    CVE-fixed: CVE-2017-15852
    CRs-fixed: 2046770
    Mot-CRs-fixed: (CR)
    
    Change-Id: Ifa1ac7d78eb2fcdb396a5d906722f4dcef688b84
    Signed-off-by: Venu Yeshala <vyeshala@codeaurora.org>
    Signed-off-by: Srikanth A R <arsrikan@motorola.com>
    Reviewed-on: https://gerrit.mot.com/1118252
    SME-Granted: SME Approvals Granted
    SLTApproved: Slta Waiver
    Tested-by: Jira Key
    Reviewed-by: Igor Kovalenko <igork@motorola.com>
    Submit-Approved: Jira Key

diff --git a/drivers/media/platform/msm/camera_v2/ispif/msm_ispif.c b/drivers/media/platform/msm/camera_v2/ispif/msm_ispif.c
index 81c7d6ec3ff4..6c9960507e8e 100644
--- a/drivers/media/platform/msm/camera_v2/ispif/msm_ispif.c
+++ b/drivers/media/platform/msm/camera_v2/ispif/msm_ispif.c
@@ -599,7 +599,7 @@ static int msm_ispif_reset(struct ispif_device *ispif)
 			ispif->base + ISPIF_VFE_m_INTF_CMD_0(i));
 		msm_camera_io_w(ISPIF_STOP_INTF_IMMEDIATELY,
 			ispif->base + ISPIF_VFE_m_INTF_CMD_1(i));
-		pr_debug("%s: base %lx", __func__, (unsigned long)ispif->base);
+		pr_debug("%s: base %pK", __func__, ispif->base);
 		msm_camera_io_w(0, ispif->base +
 			ISPIF_VFE_m_PIX_INTF_n_CID_MASK(i, 0));
 		msm_camera_io_w(0, ispif->base +
diff --git a/drivers/media/platform/msm/camera_v2_2016/ispif/msm_ispif.c b/drivers/media/platform/msm/camera_v2_2016/ispif/msm_ispif.c
index 7a0ef4f7f93f..c0db54184352 100644
--- a/drivers/media/platform/msm/camera_v2_2016/ispif/msm_ispif.c
+++ b/drivers/media/platform/msm/camera_v2_2016/ispif/msm_ispif.c
@@ -599,7 +599,7 @@ static int msm_ispif_reset(struct ispif_device *ispif)
 			ispif->base + ISPIF_VFE_m_INTF_CMD_0(i));
 		msm_camera_io_w(ISPIF_STOP_INTF_IMMEDIATELY,
 			ispif->base + ISPIF_VFE_m_INTF_CMD_1(i));
-		pr_debug("%s: base %lx", __func__, (unsigned long)ispif->base);
+		pr_debug("%s: base %pK", __func__, ispif->base);
 		msm_camera_io_w(0, ispif->base +
 			ISPIF_VFE_m_PIX_INTF_n_CID_MASK(i, 0));
 		msm_camera_io_w(0, ispif->base +
