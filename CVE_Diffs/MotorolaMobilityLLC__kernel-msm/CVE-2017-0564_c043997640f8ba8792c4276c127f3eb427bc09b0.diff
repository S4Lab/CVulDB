MotorolaMobilityLLC__kernel-msm
commit c043997640f8ba8792c4276c127f3eb427bc09b0
Author:     Daniel Rosenberg <drosen@google.com>
AuthorDate: Tue Apr 4 14:27:16 2017 -0700
Commit:     PDO SCM Team <hudsoncm@motorola.com>
CommitDate: Thu Dec 14 23:30:46 2017 -0600

    ANDROID: ion: Fix uninitialized variable
    
    Fix an uninitialized variable in user_ion_handle_put_nolock
    
    Change-Id: Ia634b790661089ad01aca8e5975984435463d148
    Signed-off-by: Daniel Rosenberg <drosen@google.com>
    Bug: 34276203
    
    Mot-CRs-fixed: (CR)
    CVE-fixed: CVE-2017-0564
    [d-cagle@codeaurora.org: Add commit message]
    Signed-off-by: Dennis Cagle <d-cagle@codeaurora.org>
    
    (cherry picked from commit b2f4b1c596362ea8f7a8725761f9e6cc0ca4adb0)
    Signed-off-by: Ashwin Pathmudi <jfxr63@motorola.com>
    Change-Id: I4866cd1eb6d9f32766223dfdb38f58fd1feab66f
    Reviewed-on: https://gerrit.mot.com/1093970
    SME-Granted: SME Approvals Granted
    SLTApproved: Slta Waiver
    Tested-by: Jira Key
    Reviewed-by: Shi-Yong Li <a22381@motorola.com>
    Reviewed-by: Igor Kovalenko <igork@motorola.com>
    Submit-Approved: Jira Key
    (cherry picked from commit 85c4447d94375c05006f267b3a207d6cb6cbe189)

diff --git a/drivers/staging/android/ion/ion.c b/drivers/staging/android/ion/ion.c
index f34cefafd49a..37feb1ca8851 100755
--- a/drivers/staging/android/ion/ion.c
+++ b/drivers/staging/android/ion/ion.c
@@ -477,7 +477,7 @@ static struct ion_handle* pass_to_user(struct ion_handle *handle)
 /* Must hold the client lock */
 static int user_ion_handle_put_nolock(struct ion_handle *handle)
 {
-	int ret;
+	int ret = 0;
 
 	if (--handle->user_ref_count == 0) {
 		ret = ion_handle_put_nolock(handle);
