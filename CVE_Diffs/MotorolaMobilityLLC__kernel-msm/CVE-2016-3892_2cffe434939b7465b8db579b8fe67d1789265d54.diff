MotorolaMobilityLLC__kernel-msm
commit 2cffe434939b7465b8db579b8fe67d1789265d54
Author:     Venkat Arcot <venkat@motorola.com>
AuthorDate: Tue Aug 23 10:46:02 2016 -0500
Commit:     Venkat Arcot <venkat@motorola.com>
CommitDate: Wed Aug 31 16:01:48 2016 +0000

    Android Security September Bulletin
    
    CVE-2016-3892 - Information disclosure vulnerability in Qualcomm SPMI driver
    (cherry picked from commit de77eab72d8ea2c53644d51c63bee54c0332a00c)
    
    Change-Id: I23a3f931c59451ab962b85eb6d105a7977265650

diff --git a/fs/ext4/inode.c b/fs/ext4/inode.c
index f9e11df768d5..5405075ef98d 100644
--- a/fs/ext4/inode.c
+++ b/fs/ext4/inode.c
@@ -3574,6 +3574,7 @@ int ext4_can_truncate(struct inode *inode)
 
 int ext4_punch_hole(struct file *file, loff_t offset, loff_t length)
 {
+#if 0
 	struct inode *inode = file_inode(file);
 	struct super_block *sb = inode->i_sb;
 	ext4_lblk_t first_block, stop_block;
@@ -3759,6 +3760,12 @@ out_dio:
 out_mutex:
 	mutex_unlock(&inode->i_mutex);
 	return ret;
+#else
+	/*
+	 * Disabled as per b/28760453
+	 */
+	return -EOPNOTSUPP;
+#endif
 }
 
 /*
