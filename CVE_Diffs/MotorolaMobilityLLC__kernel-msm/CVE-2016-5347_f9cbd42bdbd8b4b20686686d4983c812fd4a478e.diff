MotorolaMobilityLLC__kernel-msm
commit f9cbd42bdbd8b4b20686686d4983c812fd4a478e
Author:     Xiaojun Sang <xsang@codeaurora.org>
AuthorDate: Wed Mar 22 15:08:29 2017 +0530
Commit:     PDO SCM Team <hudsoncm@motorola.com>
CommitDate: Thu May 4 01:57:15 2017 -0500

    IKSIMP-2215: ASoC: soc: msm: initialize buffer to prevent kernel data leakage
    
    To prevent potential kernel stack data leakage, initialize
    channel_map[].
    
    CVE-fixed: CVE-2016-5347
    CRs-Fixed: 1100878
    Change-Id: I7b81cea20485bc7514551672bb54c7fd455049e3
    Signed-off-by: Xiaojun Sang <xsang@codeaurora.org>
    ----
    Reviewed-on: https://gerrit.mot.com/966235
    SLTApproved: Slta Waiver <sltawvr@motorola.com>
    SME-Granted: SME Approvals Granted
    Tested-by: Jira Key <jirakey@motorola.com>
    Reviewed-by: Vrushali Prakash Bhosale <wkvq37@motorola.com>
    Reviewed-by: Igor Kovalenko <igork@motorola.com>
    Submit-Approved: Jira Key <jirakey@motorola.com>

diff --git a/sound/soc/msm/qdsp6v2/msm-qti-pp-config.c b/sound/soc/msm/qdsp6v2/msm-qti-pp-config.c
index 3603a36ae9ce..456218de84f3 100644
--- a/sound/soc/msm/qdsp6v2/msm-qti-pp-config.c
+++ b/sound/soc/msm/qdsp6v2/msm-qti-pp-config.c
@@ -502,7 +502,7 @@ static int msm_qti_pp_set_auxpcm_lb_vol_mixer(struct snd_kcontrol *kcontrol,
 static int msm_qti_pp_get_channel_map_mixer(struct snd_kcontrol *kcontrol,
 					    struct snd_ctl_elem_value *ucontrol)
 {
-	char channel_map[PCM_FORMAT_MAX_NUM_CHANNEL];
+	char channel_map[PCM_FORMAT_MAX_NUM_CHANNEL] = {0};
 	int i;
 
 	adm_get_multi_ch_map(channel_map, ADM_PATH_PLAYBACK);
