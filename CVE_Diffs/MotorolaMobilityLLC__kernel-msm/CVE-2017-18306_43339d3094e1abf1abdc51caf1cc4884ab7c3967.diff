MotorolaMobilityLLC__kernel-msm
commit 43339d3094e1abf1abdc51caf1cc4884ab7c3967
Author:     Annamraj <annamraj@codeaurora.org>
AuthorDate: Wed Apr 11 10:42:13 2018 +0530
Commit:     PDO SCM Team <hudsoncm@motorola.com>
CommitDate: Mon Aug 27 05:22:04 2018 -0500

    msm: camera: Fix for Possible information leak issue
    
    Fix for possible information leak issue because of unintialised variable
    Which can be accesed from userspace in camera fd driver
    
    Bug-id: A-73889358
    CVE-fixed: CVE-2017-18306
    CRs-fixed: 2216399
    Mot-CRs-fixed: (CR), (CR)
    
    Change-Id: Ica022b04962b87fc05217ebc5fbbe3955fe3733b
    Signed-off-by: Annamraj <annamraj@codeaurora.org>
    Signed-off-by: Srikanth A R <arsrikan@motorola.com>
    Reviewed-on: https://gerrit.mot.com/1214092
    SME-Granted: SME Approvals Granted
    SLTApproved: Slta Waiver
    Tested-by: Jira Key
    Reviewed-by: Ravikumar Vembu <raviv@motorola.com>
    Submit-Approved: Jira Key

diff --git a/drivers/media/platform/msm/camera_v2_2016/fd/msm_fd_dev.c b/drivers/media/platform/msm/camera_v2_2016/fd/msm_fd_dev.c
index 1b6cc3e24dcd..2d808608e6de 100644
--- a/drivers/media/platform/msm/camera_v2_2016/fd/msm_fd_dev.c
+++ b/drivers/media/platform/msm/camera_v2_2016/fd/msm_fd_dev.c
@@ -1,4 +1,4 @@
-/* Copyright (c) 2014-2016, The Linux Foundation. All rights reserved.
+/* Copyright (c) 2014-2018, The Linux Foundation. All rights reserved.
  *
  * This program is free software; you can redistribute it and/or modify
  * it under the terms of the GNU General Public License version 2 and
@@ -440,7 +440,7 @@ static int msm_fd_open(struct file *file)
 	}
 
 	ctx->mem_pool.fd_device = ctx->fd_device;
-	ctx->stats = vmalloc(sizeof(*ctx->stats) * MSM_FD_MAX_RESULT_BUFS);
+	ctx->stats = vzalloc(sizeof(*ctx->stats) * MSM_FD_MAX_RESULT_BUFS);
 	if (!ctx->stats) {
 		dev_err(device->dev, "No memory for face statistics\n");
 		ret = -ENOMEM;
