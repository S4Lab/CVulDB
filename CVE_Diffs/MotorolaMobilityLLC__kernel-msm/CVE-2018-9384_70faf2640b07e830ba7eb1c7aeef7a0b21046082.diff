MotorolaMobilityLLC__kernel-msm
commit 70faf2640b07e830ba7eb1c7aeef7a0b21046082
Author:     Mark Rutland <mark.rutland@arm.com>
AuthorDate: Thu Nov 3 20:23:07 2016 +0000
Commit:     lulu2 <lulu2@lenovo.com>
CommitDate: Mon Jun 11 16:50:03 2018 +0800

    UPSTREAM: arm64: unexport walk_stackframe
    
    The walk_stackframe functions is architecture-specific, with a varying
    prototype, and common code should not use it directly. None of its
    current users can be built as modules. With THREAD_INFO_IN_TASK, users
    will also need to hold a stack reference before calling it.
    
    There's no reason for it to be exported, and it's very easy to misuse,
    so unexport it for now.
    
    Mot-CRs-fixed: (CR)
    CVE-fixed: CVE-2018-9384
    Bug: 74356909
    
    Signed-off-by: Mark Rutland <mark.rutland@arm.com>
    Cc: Will Deacon <will.deacon@arm.com>
    Signed-off-by: Catalin Marinas <catalin.marinas@arm.com>
    
    Bug: 66351489
    Change-Id: I6be26bf043c336c2b757ef9466b6db8b6348a266
    (cherry picked from commit 2020a5ae7c8c2c8504565004915017507b135c63)
    Signed-off-by: Zubin Mithra <zsm@google.com>
    Reviewed-on: https://gerrit.mot.com/1182514
    SLTApproved: Slta Waiver
    SME-Granted: SME Approvals Granted
    Tested-by: Jira Key
    Reviewed-by: Igor Kovalenko <igork@motorola.com>
    Submit-Approved: Jira Key

diff --git a/arch/arm64/kernel/stacktrace.c b/arch/arm64/kernel/stacktrace.c
index 869cfdaa5727..4abf4f55941b 100644
--- a/arch/arm64/kernel/stacktrace.c
+++ b/arch/arm64/kernel/stacktrace.c
@@ -73,7 +73,6 @@ void notrace walk_stackframe(struct stackframe *frame,
 			break;
 	}
 }
-EXPORT_SYMBOL(walk_stackframe);
 
 #ifdef CONFIG_STACKTRACE
 struct stack_trace_data {
