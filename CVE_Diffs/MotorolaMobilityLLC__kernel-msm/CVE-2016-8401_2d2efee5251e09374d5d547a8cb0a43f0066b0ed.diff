MotorolaMobilityLLC__kernel-msm
commit 2d2efee5251e09374d5d547a8cb0a43f0066b0ed
Author:     Ashwin Pathmudi <jfxr63@motorola.com>
AuthorDate: Mon Nov 14 15:40:33 2016 +0530
Commit:     a7301c <a7301c@motorola.com>
CommitDate: Tue Dec 5 10:37:54 2017 -0600

    ion: Change format specifier %p to %pK
    
    The format specifier %p can leak kernel addresses.
    The fix is designed to use %pK instead of %p, which also
    evaluates whether kptr_restrict is set.
    
    CVE-Fixed: CVE-2016-8401
    
    Change-Id: I6ad374544a4f20a17aab85ac80f8db210d54e057
    Signed-off-by: Ashwin Pathmudi <jfxr63@motorola.com>
    Reviewed-on: https://gerrit.mot.com/921215
    SME-Granted: SME Approvals Granted
    SLTApproved: Slta Waiver <sltawvr@motorola.com>
    Tested-by: Jira Key <jirakey@motorola.com>
    Reviewed-by: Igor Kovalenko <igork@motorola.com>
    Submit-Approved: Jira Key <jirakey@motorola.com>

diff --git a/drivers/staging/android/ion/ion.c b/drivers/staging/android/ion/ion.c
index 13e0d2d36069..3d2385db813a 100644
--- a/drivers/staging/android/ion/ion.c
+++ b/drivers/staging/android/ion/ion.c
@@ -2056,7 +2056,7 @@ static int ion_debug_allbufs_show(struct seq_file *s, void *unused)
 		int refs_found = 0;
 		int clients_busy = 0;
 
-		seq_printf(s, "%16.s %16p %12.x %12.d %20.s    %s",
+		seq_printf(s, "%16.s %16pK %12.x %12.d %20.s    %s",
 			buf->heap->name, buf, (int)buf->size,
 			buf_refcount, buf->alloc_client_name, "");
 
