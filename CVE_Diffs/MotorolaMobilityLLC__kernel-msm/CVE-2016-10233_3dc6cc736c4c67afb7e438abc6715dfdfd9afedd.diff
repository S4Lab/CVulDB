MotorolaMobilityLLC__kernel-msm
commit 3dc6cc736c4c67afb7e438abc6715dfdfd9afedd
Author:     Shreesha Innaje <dpxv34@motorola.com>
AuthorDate: Mon Mar 20 18:42:17 2017 +0530
Commit:     Fan Hang <hangfan1@lenovo.com>
CommitDate: Tue Oct 17 09:27:23 2017 +0800

    [addison] Fix camera breakage
    
    This is a fix for regression caused due to
    security bulletin change CVE-2016-10233.
    
    Change-Id: I8b871d90f9c396a47f941f85fdf47f0fa143c99c
    Signed-off-by: Shreesha Innaje <dpxv34@motorola.com>
    Reviewed-on: https://gerrit.mot.com/965224
    SLTApproved: Slta Waiver <sltawvr@motorola.com>
    SME-Granted: SME Approvals Granted
    Tested-by: Jira Key <jirakey@motorola.com>
    Reviewed-by: Igor Kovalenko <igork@motorola.com>
    Submit-Approved: Jira Key <jirakey@motorola.com>
    (cherry picked from commit e877bc1c3403aa0ec14e3a0bb82d177ab4a654f1)
    Reviewed-on: https://gerrit.mot.com/991667
    Reviewed-by: Qiang Nie <nieqiang2@mt.com>
    SLTApproved: Qiang Nie <nieqiang2@mt.com>
    Submit-Approved: Qiang Nie <nieqiang2@mt.com>

diff --git a/drivers/media/platform/msm/camera_v2_2016/common/msm_camera_io_util.c b/drivers/media/platform/msm/camera_v2_2016/common/msm_camera_io_util.c
index d5b9244dad7e..832fd89fad64 100644
--- a/drivers/media/platform/msm/camera_v2_2016/common/msm_camera_io_util.c
+++ b/drivers/media/platform/msm/camera_v2_2016/common/msm_camera_io_util.c
@@ -395,7 +395,7 @@ int msm_camera_config_vreg(struct device *dev, struct camera_vreg_t *cam_vreg,
 		return -EINVAL;
 	}
 
-	if (cam_vreg == NULL) {
+	if (cam_vreg == NULL && num_vreg_seq > 0) {
 		pr_err("%s:%d cam_vreg sequence invalid\n", __func__, __LINE__);
 		return -EINVAL;
 	}
