MotorolaMobilityLLC__kernel-msm
commit 92c86b2a341fc0f7eab8b0d21596cec003712051
Author:     Ashwin Pathmudi <jfxr63@motorola.com>
AuthorDate: Mon Nov 14 17:49:52 2016 +0530
Commit:     PDO SCM Team <hudsoncm@motorola.com>
CommitDate: Fri Feb 10 02:52:17 2017 -0600

    IKSECURITY-1740: ion: Change format specifier %p to %pK
    
    The format specifier %p can leak kernel addresses.
    The fix is designed to use %pK instead of %p, which also
    evaluates whether kptr_restrict is set.
    
    CVE-Fixed: CVE-2016-8401
    
    Change-Id: I2d3f048ee50b8be3344393d6e72791e9ceca3a52
    Signed-off-by: Ashwin Pathmudi <jfxr63@motorola.com>
    Reviewed-on: https://gerrit.mot.com/921268
    SLTApproved: Slta Waiver <sltawvr@motorola.com>
    SME-Granted: SME Approvals Granted
    Tested-by: Jira Key <jirakey@motorola.com>
    Reviewed-by: Igor Kovalenko <igork@motorola.com>
    Submit-Approved: Jira Key <jirakey@motorola.com>

diff --git a/drivers/staging/android/ion/ion.c b/drivers/staging/android/ion/ion.c
index bf93c7770a58..90be00e43aa9 100644
--- a/drivers/staging/android/ion/ion.c
+++ b/drivers/staging/android/ion/ion.c
@@ -773,7 +773,7 @@ static int ion_debug_client_show(struct seq_file *s, void *unused)
 		struct ion_handle *handle = rb_entry(n, struct ion_handle,
 						     node);
 
-		seq_printf(s, "%16.16s: %16zx : %16d : %12p",
+		seq_printf(s, "%16.16s: %16zx : %16d : %12pK",
 				handle->buffer->heap->name,
 				handle->buffer->size,
 				atomic_read(&handle->ref.refcount),
