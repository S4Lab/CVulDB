MotorolaMobilityLLC__kernel-msm
commit 819f4d4830fc26221b68d1bab3be7b35333554a8
Author:     Vineet Angadi V <vineetv@motorola.com>
AuthorDate: Thu Nov 10 12:13:08 2016 +0530
Commit:     Carlos Pinho <cpinho@motorola.com>
CommitDate: Thu Mar 16 14:52:31 2017 -0500

    vmlinux.lds.h:  initconst adjustments for relocatable data
    
    The sys_call_table is writable leading to potential arbitrary code
    execution.The fix is designed to mark the sys_call_table const to be
    placed in the .rodata section. This will cause attempts to modify the
    table to fail when strict page permissions are in place preventing the
    potential arbitrary code execution.
    Mot-CRs-fixed: (CR)
    CVE-Fixed: CVE-2015-8967
    
    Change-Id: I9c2fb7730d8078f1cbbe68118e2e91366d8836b6
    Signed-off-by: Vineet Angadi V <vineetv@motorola.com>
    Reviewed-on: https://gerrit.mot.com/918677
    SME-Granted: SME Approvals Granted
    SLTApproved: Slta Waiver <sltawvr@motorola.com>
    Tested-by: Jira Key <jirakey@motorola.com>
    Reviewed-by: Vijayakumar Gn <vijaygn@motorola.com>
    Reviewed-by: Igor Kovalenko <igork@motorola.com>
    Submit-Approved: Jira Key <jirakey@motorola.com>

diff --git a/include/asm-generic/vmlinux.lds.h b/include/asm-generic/vmlinux.lds.h
index 0dc46eb3fd28..eece69b3b76e 100644
--- a/include/asm-generic/vmlinux.lds.h
+++ b/include/asm-generic/vmlinux.lds.h
@@ -248,6 +248,7 @@
 	.rodata           : AT(ADDR(.rodata) - LOAD_OFFSET) {		\
 		VMLINUX_SYMBOL(__start_rodata) = .;			\
 		*(.rodata) *(.rodata.*)					\
+		*(.data.rel.ro.local* .gnu.linkonce.d.rel.ro.local.*) *(.data.rel.ro .data.rel.ro.* .gnu.linkonce.d.rel.ro.*) \
 		*(__vermagic)		/* Kernel version magic */	\
 		. = ALIGN(8);						\
 		VMLINUX_SYMBOL(__start___tracepoints_ptrs) = .;		\
