arduino__linino
commit 2269ad7f4592cad6a0f37aee042891b05638c6bf
Author:     nico <nico@3c298f89-4303-0410-b956-a3cf2f4a3e73>
AuthorDate: Wed Aug 19 13:20:27 2009 +0000
Commit:     nico <nico@3c298f89-4303-0410-b956-a3cf2f4a3e73>
CommitDate: Wed Aug 19 13:20:27 2009 +0000

    [packages] curl: update to v7.19.6
     - CVE-2009-2417
    
    
    git-svn-id: svn://svn.openwrt.org/openwrt@17310 3c298f89-4303-0410-b956-a3cf2f4a3e73

diff --git a/packages/libs/curl/Makefile b/packages/libs/curl/Makefile
index e1420e8fe6..128f8c6b33 100644
--- a/packages/libs/curl/Makefile
+++ b/packages/libs/curl/Makefile
@@ -8,8 +8,8 @@
 include $(TOPDIR)/rules.mk
 
 PKG_NAME:=curl
-PKG_VERSION:=7.19.5
-PKG_RELEASE:=2
+PKG_VERSION:=7.19.6
+PKG_RELEASE:=1
 
 PKG_SOURCE:=$(PKG_NAME)-$(PKG_VERSION).tar.bz2
 PKG_SOURCE_URL:=http://curl.haxx.se/download/ \
@@ -19,7 +19,7 @@ PKG_SOURCE_URL:=http://curl.haxx.se/download/ \
 	ftp://ftp.planetmirror.com/pub/curl/ \
 	http://www.mirrormonster.com/curl/download/ \
 	http://curl.mirrors.cyberservers.net/download/
-PKG_MD5SUM:=426d161661dce70c8ea9ad8f553363a3
+PKG_MD5SUM:=8402c1f654c51ad7287aad57c3aa79be
 
 PKG_FIXUP = libtool
 
diff --git a/packages/libs/curl/patches/100-cross_compile.patch b/packages/libs/curl/patches/100-cross_compile.patch
index 0a79e27b28..a135d1c867 100644
--- a/packages/libs/curl/patches/100-cross_compile.patch
+++ b/packages/libs/curl/patches/100-cross_compile.patch
@@ -1,8 +1,6 @@
-Index: curl-7.19.5/configure
-===================================================================
---- curl-7.19.5.orig/configure	2009-05-25 10:09:06.000000000 +0400
-+++ curl-7.19.5/configure	2009-05-25 10:09:06.000000000 +0400	
-@@ -25173,16 +25173,6 @@
+--- a/configure
++++ b/configure
+@@ -25479,16 +25479,6 @@ fi
  rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
    fi
  
@@ -19,7 +17,7 @@ Index: curl-7.19.5/configure
  fi
  
  
-@@ -26177,19 +26167,6 @@
+@@ -26486,19 +26476,6 @@ else
  fi
  
  
@@ -39,11 +37,9 @@ Index: curl-7.19.5/configure
      fi
  
    fi
-Index: curl-7.19.5/configure.ac
-===================================================================
---- curl-7.19.5.orig/configure.ac	2009-05-25 10:40:49.000000000 +0400
-+++ curl-7.19.5/configure.ac	2009-05-25 10:40:49.000000000 +0400
-@@ -1340,18 +1340,6 @@
+--- a/configure.ac
++++ b/configure.ac
+@@ -1332,18 +1332,6 @@ if test X"$OPT_SSL" != Xno; then
      ])
    fi
  
@@ -62,7 +58,7 @@ Index: curl-7.19.5/configure.ac
  fi
  
  dnl **********************************************************************
-@@ -1615,21 +1603,6 @@
+@@ -1617,21 +1605,6 @@ if test "$OPENSSL_ENABLED" != "1"; then
           CPPFLAGS="$CLEANCPPFLAGS"
         ])
  
diff --git a/packages/libs/curl/patches/200-no_docs_tests.patch b/packages/libs/curl/patches/200-no_docs_tests.patch
index f3b82bdc2e..6e900eb9b6 100644
--- a/packages/libs/curl/patches/200-no_docs_tests.patch
+++ b/packages/libs/curl/patches/200-no_docs_tests.patch
@@ -1,7 +1,6 @@
-diff -urN curl-7.17.1/Makefile.am curl-7.17.1.new/Makefile.am
---- curl-7.17.1/Makefile.am	2007-07-12 22:41:22.000000000 +0200
-+++ curl-7.17.1.new/Makefile.am	2008-07-29 12:18:00.000000000 +0200
-@@ -29,7 +29,7 @@
+--- a/Makefile.am
++++ b/Makefile.am
+@@ -38,7 +38,7 @@ EXTRA_DIST = CHANGES COPYING maketgz Mak
  bin_SCRIPTS = curl-config
  
  SUBDIRS = lib src
@@ -10,10 +9,9 @@ diff -urN curl-7.17.1/Makefile.am curl-7.17.1.new/Makefile.am
  
  pkgconfigdir = $(libdir)/pkgconfig
  pkgconfig_DATA = libcurl.pc
-diff -urN curl-7.17.1/Makefile.in curl-7.17.1.new/Makefile.in
---- curl-7.17.1/Makefile.in	2007-10-29 15:49:45.000000000 +0100
-+++ curl-7.17.1.new/Makefile.in	2008-07-29 12:17:49.000000000 +0200
-@@ -260,7 +260,7 @@
+--- a/Makefile.in
++++ b/Makefile.in
+@@ -298,7 +298,7 @@ EXTRA_DIST = CHANGES COPYING maketgz Mak
  
  bin_SCRIPTS = curl-config
  SUBDIRS = lib src
diff --git a/packages/libs/curl/patches/510-no_sslv2.patch b/packages/libs/curl/patches/510-no_sslv2.patch
index 19fee7032c..9c1089b2ef 100644
--- a/packages/libs/curl/patches/510-no_sslv2.patch
+++ b/packages/libs/curl/patches/510-no_sslv2.patch
@@ -1,22 +1,21 @@
-diff -ruN curl-7.14.0-old/lib/ssluse.c curl-7.14.0-new/lib/ssluse.c
---- curl-7.14.0-old/lib/ssluse.c	2005-04-15 00:52:57.000000000 +0200
-+++ curl-7.14.0-new/lib/ssluse.c	2006-12-18 10:48:20.000000000 +0100
-@@ -1144,9 +1144,11 @@
+--- a/lib/ssluse.c
++++ b/lib/ssluse.c
+@@ -1384,10 +1384,12 @@ ossl_connect_step1(struct connectdata *c
    case CURL_SSLVERSION_TLSv1:
      req_method = TLSv1_client_method();
      break;
 +#ifndef OPENSSL_NO_SSL2
    case CURL_SSLVERSION_SSLv2:
      req_method = SSLv2_client_method();
+     sni = FALSE;
      break;
 +#endif
    case CURL_SSLVERSION_SSLv3:
      req_method = SSLv3_client_method();
-     break;
-diff -ruN curl-7.14.0-old/src/main.c curl-7.14.0-new/src/main.c
---- curl-7.14.0-old/src/main.c	2005-05-12 09:28:03.000000000 +0200
-+++ curl-7.14.0-new/src/main.c	2006-12-18 10:47:48.000000000 +0100
-@@ -819,7 +819,9 @@
+     sni = FALSE;
+--- a/src/main.c
++++ b/src/main.c
+@@ -824,7 +824,9 @@ static void help(void)
  #endif
      " -Y/--speed-limit   Stop transfer if below speed-limit for 'speed-time' secs",
      " -y/--speed-time    Time needed to trig speed-limit abort. Defaults to 30",
@@ -26,7 +25,7 @@ diff -ruN curl-7.14.0-old/src/main.c curl-7.14.0-new/src/main.c
      " -3/--sslv3         Use SSLv3 (SSL)",
      "    --stderr <file> Where to redirect stderr. - means stdout",
      "    --tcp-nodelay   Use the TCP_NODELAY option",
-@@ -1671,10 +1673,12 @@
+@@ -2228,10 +2230,12 @@ static ParameterError getparameter(char 
        /* TLS version 1 */
        config->ssl_version = CURL_SSLVERSION_TLSv1;
        break;
