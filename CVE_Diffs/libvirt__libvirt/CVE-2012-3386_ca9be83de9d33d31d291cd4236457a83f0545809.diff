libvirt__libvirt
commit ca9be83de9d33d31d291cd4236457a83f0545809
Author:     Eric Blake <eblake@redhat.com>
AuthorDate: Thu Aug 16 16:18:44 2012 -0600
Commit:     Eric Blake <eblake@redhat.com>
CommitDate: Thu Aug 16 16:37:27 2012 -0600

    build: fix syntax check during 'make distcheck'
    
    'make distcheck' was failing because a syntax check file,
    .sc-start-sc_vulnerable_makefile_CVE-2012-3386, got left
    behind.  I traced it to the 'distdir' rule depending on a
    shortcut syntax-check name rather than the full rule name
    normally used during 'local-check' from maint.mk.
    
    * cfg.mk (distdir): Depend on full rule, not shorthand name.

diff --git a/cfg.mk b/cfg.mk
index 1318593b51..e9138a87f9 100644
--- a/cfg.mk
+++ b/cfg.mk
@@ -85,7 +85,7 @@ local-checks-to-skip =			\
 ifeq ($(filter dist%, $(MAKECMDGOALS)), )
 local-checks-to-skip +=	sc_vulnerable_makefile_CVE-2012-3386
 else
-distdir: sc_vulnerable_makefile_CVE-2012-3386
+distdir: sc_vulnerable_makefile_CVE-2012-3386.z
 endif
 
 # Files that should never cause syntax check failures.
