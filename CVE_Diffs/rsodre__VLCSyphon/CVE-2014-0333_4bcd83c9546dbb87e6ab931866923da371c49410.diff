rsodre__VLCSyphon
commit 4bcd83c9546dbb87e6ab931866923da371c49410
Author:     Jean-Baptiste Kempf <jb@videolan.org>
AuthorDate: Sat May 24 18:12:41 2014 +0200
Commit:     Jean-Baptiste Kempf <jb@videolan.org>
CommitDate: Sat May 24 18:12:41 2014 +0200

    Contribs: update PNG to 1.6.10
    
    CVE-2014-0333

diff --git a/contrib/src/png/SHA512SUMS b/contrib/src/png/SHA512SUMS
index 1c073fd756..2aa9013d7e 100644
--- a/contrib/src/png/SHA512SUMS
+++ b/contrib/src/png/SHA512SUMS
@@ -1 +1 @@
-788da3ba1785fd9b9d1009f3b2dad5120ce330e0340b14057143957010b71920a0f524c9f77c877f359382f75f95542f6b71a81b6ee138b7b6ae1d11c318ebde  libpng-1.6.8.tar.xz
+f475ba5544b11064544a1571e194a7e4cf387d386cd9f300f8bbdc252636a141ac2beeff47f32ee45617d894a8dee8c0c81e71ba3d0c42a47160ce32078cd1b5  libpng-1.6.10.tar.xz
diff --git a/contrib/src/png/bins.patch b/contrib/src/png/bins.patch
index 1f51ada692..317f9c85ea 100644
--- a/contrib/src/png/bins.patch
+++ b/contrib/src/png/bins.patch
@@ -1,15 +1,15 @@
---- png/Makefile.am.orig	2013-08-20 14:05:04.803159380 +0200
-+++ png/Makefile.am	2013-08-20 14:05:10.795159128 +0200
+--- libpng-1.6.10/Makefile.am.orig	2014-05-24 18:11:01.881964331 +0200
++++ libpng-1.6.10/Makefile.am	2014-05-24 18:12:02.839819773 +0200
 @@ -7,10 +7,10 @@
  ACLOCAL_AMFLAGS = -I scripts
  
  # test programs - run on make check, make distcheck
--check_PROGRAMS= pngtest pngunknown pngstest pngvalid
+-check_PROGRAMS= pngtest pngunknown pngstest pngvalid pngimage
 +check_PROGRAMS= 
  
  # Utilities - installed
 -bin_PROGRAMS= pngfix png-fix-itxt
 +bin_PROGRAMS= 
  
- pngtest_SOURCES = pngtest.c
- pngtest_LDADD = libpng@PNGLIB_MAJOR@@PNGLIB_MINOR@.la
+ # This ensures that pnglibconf.h gets built at the start of 'make all' or
+ # 'make check', but it does not add dependencies to the individual programs,
diff --git a/contrib/src/png/rules.mak b/contrib/src/png/rules.mak
index 468dd14610..2ddfc6aac3 100644
--- a/contrib/src/png/rules.mak
+++ b/contrib/src/png/rules.mak
@@ -1,5 +1,5 @@
 # PNG
-PNG_VERSION := 1.6.8
+PNG_VERSION := 1.6.10
 PNG_URL := $(SF)/libpng/libpng16/$(PNG_VERSION)/libpng-$(PNG_VERSION).tar.xz
 
 PKGS += png
