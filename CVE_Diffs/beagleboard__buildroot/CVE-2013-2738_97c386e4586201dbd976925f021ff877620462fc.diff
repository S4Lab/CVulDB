beagleboard__buildroot
commit 97c386e4586201dbd976925f021ff877620462fc
Author:     Gustavo Zacarias <gustavo@zacarias.com.ar>
AuthorDate: Mon Oct 7 16:46:56 2013 -0300
Commit:     Peter Korsgaard <peter@korsgaard.com>
CommitDate: Mon Oct 7 22:16:51 2013 +0200

    minidlna: security bump to version 1.0.26
    
    Fixes CVE-2013-2738, CVE-2013-2739 and CVE-2013-2745.
    Also needs threads, which fixes:
    http://autobuild.buildroot.net/results/d91/d91b64c93097580e1da53b6ccfb4b492f382a5f3
    
    Signed-off-by: Gustavo Zacarias <gustavo@zacarias.com.ar>
    Signed-off-by: Peter Korsgaard <peter@korsgaard.com>

diff --git a/package/minidlna/Config.in b/package/minidlna/Config.in
index c73c00142c..2b684ba290 100644
--- a/package/minidlna/Config.in
+++ b/package/minidlna/Config.in
@@ -3,6 +3,7 @@ config BR2_PACKAGE_MINIDLNA
 	depends on BR2_LARGEFILE # ffmpeg
 	depends on BR2_INET_IPV6 # ffmpeg
 	depends on BR2_USE_MMU # fork
+	depends on BR2_TOOLCHAIN_HAS_THREADS
 	select BR2_PACKAGE_FFMPEG
 	select BR2_PACKAGE_FLAC
 	select BR2_PACKAGE_LIBVORBIS # selects libogg
@@ -17,5 +18,5 @@ config BR2_PACKAGE_MINIDLNA
 
 	  http://minidlna.sourceforge.net/
 
-comment "minidlna requires a toolchain with LARGEFILE and IPV6 support"
-	depends on !(BR2_LARGEFILE && BR2_INET_IPV6)
+comment "minidlna requires a toolchain with LARGEFILE, IPV6 and thread support"
+	depends on !(BR2_LARGEFILE && BR2_INET_IPV6 && BR2_TOOLCHAIN_HAS_THREADS)
diff --git a/package/minidlna/minidlna.mk b/package/minidlna/minidlna.mk
index 077e2572c0..4df6ff0192 100644
--- a/package/minidlna/minidlna.mk
+++ b/package/minidlna/minidlna.mk
@@ -4,9 +4,8 @@
 #
 ################################################################################
 
-MINIDLNA_VERSION = 1.0.25
+MINIDLNA_VERSION = 1.0.26
 MINIDLNA_SITE = http://downloads.sourceforge.net/project/minidlna/minidlna/$(MINIDLNA_VERSION)
-MINIDLNA_SOURCE = minidlna_$(MINIDLNA_VERSION)_src.tar.gz
 MINIDLNA_LICENSE = GPLv2 BSD-3c
 MINIDLNA_LICENSE_FILES = LICENCE LICENCE.miniupnpd
 
