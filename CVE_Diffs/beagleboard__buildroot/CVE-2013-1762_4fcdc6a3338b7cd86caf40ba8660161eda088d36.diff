beagleboard__buildroot
commit 4fcdc6a3338b7cd86caf40ba8660161eda088d36
Author:     Gustavo Zacarias <gustavo@zacarias.com.ar>
AuthorDate: Tue Mar 19 06:58:46 2013 +0000
Commit:     Peter Korsgaard <jacmet@sunsite.dk>
CommitDate: Tue Mar 19 20:22:59 2013 +0100

    stunnel: security bump to version 4.55
    
    Fixes CVE-2013-1762, improves CVE-2010-3684 workaround.
    
    Signed-off-by: Gustavo Zacarias <gustavo@zacarias.com.ar>
    Signed-off-by: Peter Korsgaard <jacmet@sunsite.dk>

diff --git a/package/stunnel/Config.in b/package/stunnel/Config.in
index b1977ed175..e4a956770e 100644
--- a/package/stunnel/Config.in
+++ b/package/stunnel/Config.in
@@ -1,5 +1,6 @@
 config BR2_PACKAGE_STUNNEL
 	bool "stunnel"
+	depends on BR2_USE_MMU # fork()
 	select BR2_PACKAGE_OPENSSL
 	help
 	  Stunnel is a program that wraps any TCP connection with an SSL
diff --git a/package/stunnel/stunnel.mk b/package/stunnel/stunnel.mk
index 7c280cc4b4..92344d116f 100644
--- a/package/stunnel/stunnel.mk
+++ b/package/stunnel/stunnel.mk
@@ -4,12 +4,12 @@
 #
 #############################################################
 
-STUNNEL_VERSION = 4.44
+STUNNEL_VERSION = 4.55
 STUNNEL_SITE = http://ftp.nluug.nl/pub/networking/stunnel
 STUNNEL_DEPENDENCIES = openssl
-STUNNEL_CONF_OPT += \
-	--with-ssl=$(STAGING_DIR)/usr \
-	--with-threads=fork
+STUNNEL_CONF_OPT = --with-ssl=$(STAGING_DIR)/usr --with-threads=fork
+STUNNEL_LICENSE = GPLv2+
+STUNNEL_LICENSE_FILES = COPYING COPYRIGHT.GPL
 
 define STUNNEL_INSTALL_CONF_SCRIPT
 	$(INSTALL) -m 0755 -D package/stunnel/S50stunnel $(TARGET_DIR)/etc/init.d/S50stunnel
