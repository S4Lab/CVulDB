beagleboard__buildroot
commit 53587a3192aeaa72cf43f703ccfebdfd77998e1f
Author:     Gustavo Zacarias <gustavo@zacarias.com.ar>
AuthorDate: Mon Mar 24 08:47:50 2014 -0300
Commit:     Peter Korsgaard <peter@korsgaard.com>
CommitDate: Mon Mar 24 15:18:08 2014 +0100

    openssh: security bump to version 6.6p1
    
    Fixes CVE-2014-2532.
    SUSv3 deprecation already handled upstream.
    
    Signed-off-by: Gustavo Zacarias <gustavo@zacarias.com.ar>
    Signed-off-by: Peter Korsgaard <peter@korsgaard.com>

diff --git a/package/openssh/openssh.mk b/package/openssh/openssh.mk
index f5f334ed0c..e35ea106eb 100644
--- a/package/openssh/openssh.mk
+++ b/package/openssh/openssh.mk
@@ -4,7 +4,7 @@
 #
 ################################################################################
 
-OPENSSH_VERSION = 6.5p1
+OPENSSH_VERSION = 6.6p1
 OPENSSH_SITE = http://ftp.openbsd.org/pub/OpenBSD/OpenSSH/portable
 OPENSSH_CONF_ENV = LD="$(TARGET_CC)" LDFLAGS="$(TARGET_CFLAGS)"
 OPENSSH_CONF_OPT = --disable-lastlog --disable-utmp \
@@ -30,14 +30,4 @@ define OPENSSH_INSTALL_INIT_SYSV
 		$(TARGET_DIR)/etc/init.d/S50sshd
 endef
 
-# Replace deprecated bcopy/bzero with memset/memcpy
-define OPENSSH_REPLACE_SUSV3_DEPRECATED
-	for src in `find $(@D) -name \*.c`; do \
-		$(SED) "s/bzero(\(.*,\)/memset(\1 0, /" $${src} ;\
-		$(SED) "s/bcopy(\(.*,\) \(.*,\)/memcpy(\2 \1/" $${src} ;\
-	done
-endef
-
-OPENSSH_POST_PATCH_HOOKS += OPENSSH_REPLACE_SUSV3_DEPRECATED
-
 $(eval $(autotools-package))
