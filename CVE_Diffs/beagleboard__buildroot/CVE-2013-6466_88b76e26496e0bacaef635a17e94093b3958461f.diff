beagleboard__buildroot
commit 88b76e26496e0bacaef635a17e94093b3958461f
Author:     Gustavo Zacarias <gustavo@zacarias.com.ar>
AuthorDate: Tue Feb 25 15:21:47 2014 -0300
Commit:     Peter Korsgaard <peter@korsgaard.com>
CommitDate: Tue Feb 25 21:00:57 2014 +0100

    openswan: security bump to version 2.6.40
    
    Fixes CVE-2013-6466.
    openswan-wno-error-cpp.patch is no longer required since it's now
    conditional on a check for a modern enough compiler.
    
    Signed-off-by: Gustavo Zacarias <gustavo@zacarias.com.ar>
    Signed-off-by: Peter Korsgaard <peter@korsgaard.com>

diff --git a/package/openswan/openswan-wno-error-cpp.patch b/package/openswan/openswan-wno-error-cpp.patch
deleted file mode 100644
index 8e79ae9daa..0000000000
--- a/package/openswan/openswan-wno-error-cpp.patch
+++ /dev/null
@@ -1,29 +0,0 @@
-Kill -Wno-error=cpp, old(ish) gcc versions (< 4.4) don't like it and we still
-got 4.3.x available for internal toolchains.
-
-Signed-off-by: Gustavo Zacarias <gustavo@zacarias.com.ar>
-
-diff -Nura openswan-2.6.39.orig/lib/libopenswan/Makefile openswan-2.6.39/lib/libopenswan/Makefile
---- openswan-2.6.39.orig/lib/libopenswan/Makefile	2013-06-11 07:22:50.228520267 -0300
-+++ openswan-2.6.39/lib/libopenswan/Makefile	2013-06-11 07:27:40.087849447 -0300
-@@ -86,7 +86,7 @@
- CFLAGS+= -Wno-error=cast-qual
-
- # some junk left in alg_info.c
--CFLAGS+= -Wno-error=cpp
-+#CFLAGS+= -Wno-error=cpp
-
- #CFLAGS+= -Wmissing-declarations
- CFLAGS+= -Wstrict-prototypes
-diff -Nura openswan-2.6.39.orig/programs/pluto/Makefile openswan-2.6.39/programs/pluto/Makefile
---- openswan-2.6.39.orig/programs/pluto/Makefile	2013-06-11 07:22:49.753504978 -0300
-+++ openswan-2.6.39/programs/pluto/Makefile	2013-06-11 07:27:53.020265681 -0300
-@@ -47,7 +47,7 @@
-
- # must turn this off due to myid.c
- CFLAGS+= -Wno-error=cast-qual
--CFLAGS+= -Wno-error=cpp
-+#CFLAGS+= -Wno-error=cpp
-
- ifeq ($(HAVE_BROKEN_POPEN),true)
- CFLAGS+=-DHAVE_BROKEN_POPEN
diff --git a/package/openswan/openswan.mk b/package/openswan/openswan.mk
index 0b8e7d3a69..ae055d4e3e 100644
--- a/package/openswan/openswan.mk
+++ b/package/openswan/openswan.mk
@@ -4,7 +4,7 @@
 #
 ################################################################################
 
-OPENSWAN_VERSION = 2.6.39
+OPENSWAN_VERSION = 2.6.40
 OPENSWAN_SITE = http://download.openswan.org/openswan
 OPENSWAN_LICENSE = GPLv2+, BSD-3c
 OPENSWAN_LICENSE_FILES = COPYING LICENSE
