beagleboard__buildroot
commit c17b0f0bda68b3adcc098d6b426e6448d0444c36
Author:     Gustavo Zacarias <gustavo@zacarias.com.ar>
AuthorDate: Sun May 19 13:47:27 2013 +0000
Commit:     Peter Korsgaard <jacmet@sunsite.dk>
CommitDate: Sat May 25 13:33:50 2013 +0200

    wireshark: security bump to version 1.8.7
    
    Fixes CVE-2013-2486, CVE-2013-2487 and several wnpa-sec (wireshark)
    advisories.
    
    Signed-off-by: Gustavo Zacarias <gustavo@zacarias.com.ar>
    Acked-by: Baruch Siach <baruch@tkos.co.il>
    Signed-off-by: Peter Korsgaard <jacmet@sunsite.dk>

diff --git a/package/wireshark/Config.in b/package/wireshark/Config.in
index e6d4e72556..d4c8b43f45 100644
--- a/package/wireshark/Config.in
+++ b/package/wireshark/Config.in
@@ -3,6 +3,7 @@ config BR2_PACKAGE_WIRESHARK
 	select BR2_PACKAGE_LIBPCAP
 	select BR2_PACKAGE_LIBGCRYPT
 	select BR2_PACKAGE_LIBGLIB2
+	depends on BR2_USE_MMU # fork()
 	depends on BR2_USE_WCHAR # glib2
 	help
 	  Network traffic sniffer and protocol decoder. Currently only tshark,
diff --git a/package/wireshark/wireshark-dont-include-prefix.patch b/package/wireshark/wireshark-dont-include-prefix.patch
deleted file mode 100644
index 567af9a0b6..0000000000
--- a/package/wireshark/wireshark-dont-include-prefix.patch
+++ /dev/null
@@ -1,41 +0,0 @@
-configure.in: don't add the build host's /usr/include and /usr/lib to the 
-search path of include files and libraries. This is not what you want when 
-cross compiling.
-
-Sent upstream as https://bugs.wireshark.org/bugzilla/show_bug.cgi?id=7926.
-
-Signed-off-by: Baruch Siach <baruch@tkos.co.il>
----
-diff -Nuar wireshark-1.8.3.orig/configure.in wireshark-1.8.3/configure.in
---- wireshark-1.8.3.orig/configure.in	2012-08-15 23:33:32.000000000 +0300
-+++ wireshark-1.8.3/configure.in	2012-10-28 10:07:54.864388531 +0200
-@@ -635,29 +635,6 @@
- AC_SUBST(CORESERVICES_FRAMEWORKS)
- AC_SUBST(LAUNCHSERVICES_FRAMEWORKS)
- 
--#
--# If using $prefix we add "$prefix/include" to the include search path
--# and "$prefix/lib" to the library search path.
--#
--if test "x$prefix" != "x" ; then
--	AC_MSG_CHECKING(whether to use $prefix for headers and libraries)
--	if test -d $prefix/include ; then
--		AC_MSG_RESULT(yes)
--		#
--		# Arrange that we search for header files in "$prefix/include", as
--		# various packages we use may have been installed under "$prefix/include".
--		#
--		CPPFLAGS="$CPPFLAGS -I$prefix/include"
--
--		#
--		# Arrange that we search for libraries in "$prefix/lib".
--		#
--		AC_WIRESHARK_ADD_DASH_L(LDFLAGS, $prefix/lib)
--	else
--		AC_MSG_RESULT(no)
--	fi
--fi
--
- dnl Look in /usr/local for header files and libraries ?
- dnl XXX FIXME don't include /usr/local if it is already in the system
- dnl search path as this causes gcc 3.2 on Linux to complain about a change
diff --git a/package/wireshark/wireshark.mk b/package/wireshark/wireshark.mk
index 5a4d8b5788..34d270860e 100644
--- a/package/wireshark/wireshark.mk
+++ b/package/wireshark/wireshark.mk
@@ -4,7 +4,7 @@
 #
 #############################################################
 
-WIRESHARK_VERSION = 1.8.6
+WIRESHARK_VERSION = 1.8.7
 WIRESHARK_SOURCE = wireshark-$(WIRESHARK_VERSION).tar.bz2
 WIRESHARK_SITE = http://www.wireshark.org/download/src/all-versions
 WIRESHARK_LICENSE = wireshark license
