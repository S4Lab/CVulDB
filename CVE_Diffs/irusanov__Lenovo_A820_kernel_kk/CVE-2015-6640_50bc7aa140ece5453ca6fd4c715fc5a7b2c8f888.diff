irusanov__Lenovo_A820_kernel_kk
commit 50bc7aa140ece5453ca6fd4c715fc5a7b2c8f888
Author:     Ivan Rusanov <ivan.b.rusanov@mail.com>
AuthorDate: Thu Feb 18 22:41:04 2016 +0200
Commit:     Ivan Rusanov <ivan.b.rusanov@mail.com>
CommitDate: Thu Feb 18 22:41:04 2016 +0200

    Fix CVE-2015-6640: Elevation of Privilege Vulnerability in Kernel

diff --git a/kernel/kernel/sys.c b/kernel/kernel/sys.c
index ffc82f8b2..bef100268 100644
--- a/kernel/kernel/sys.c
+++ b/kernel/kernel/sys.c
@@ -1936,7 +1936,7 @@ static int prctl_set_vma_anon_name(unsigned long start, unsigned long end,
 			tmp = end;
 
 		/* Here vma->vm_start <= start < tmp <= (end|vma->vm_end). */
-		error = prctl_update_vma_anon_name(vma, &prev, start, end,
+		error = prctl_update_vma_anon_name(vma, &prev, start, tmp,
 				(const char __user *)arg);
 		if (error)
 			return error;
