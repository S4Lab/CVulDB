PowerShell__Win32-OpenSSH
commit 8f42a2f3760cb29c3fe9d461e4b929cea6841253
Author:     quamrulmina <quamrul@pragmasys.com>
AuthorDate: Thu Jan 14 15:15:24 2016 -0600
Commit:     quamrulmina <quamrul@pragmasys.com>
CommitDate: Thu Jan 14 15:15:24 2016 -0600

    ssh client roaming bug fix applied.
    
    Disable experimental client-side roaming support.  Server side was
    disabled/gutted for years already, but this aspect was surprisingly
    forgotten. openssh lists this bug as CVE-2016-0777
    It is described in:
    http://undeadly.org/cgi?action=article&sid=20160114142733

diff --git a/readconf.c b/readconf.c
index 7af1f86..75fc213 100644
--- a/readconf.c
+++ b/readconf.c
@@ -1723,7 +1723,7 @@ initialize_options(Options * options)
 	options->tun_remote = -1;
 	options->local_command = NULL;
 	options->permit_local_command = -1;
-	options->use_roaming = -1;
+	options->use_roaming = 0;
 	options->visual_host_key = -1;
 	options->ip_qos_interactive = -1;
 	options->ip_qos_bulk = -1;
@@ -1941,8 +1941,7 @@ void fill_default_options(Options * options, struct passwd *pw)
 		options->tun_remote = SSH_TUNID_ANY;
 	if (options->permit_local_command == -1)
 		options->permit_local_command = 0;
-	if (options->use_roaming == -1)
-		options->use_roaming = 1;
+	options->use_roaming = 0;
 	if (options->visual_host_key == -1)
 		options->visual_host_key = 0;
 	if (options->ip_qos_interactive == -1)
diff --git a/ssh.c b/ssh.c
index 0f3e3be..d07950b 100644
--- a/ssh.c
+++ b/ssh.c
@@ -2163,8 +2163,6 @@ ssh_session2(void)
 			fork_postauth();
 	}
 
-	if (options.use_roaming)
-		request_roaming();
 
 	return client_loop(tty_flag, tty_flag ?
 	    options.escape_char : SSH_ESCAPECHAR_NONE, id);
