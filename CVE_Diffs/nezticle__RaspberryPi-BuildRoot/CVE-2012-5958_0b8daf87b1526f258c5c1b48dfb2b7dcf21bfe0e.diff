nezticle__RaspberryPi-BuildRoot
commit 0b8daf87b1526f258c5c1b48dfb2b7dcf21bfe0e
Author:     Gustavo Zacarias <gustavo@zacarias.com.ar>
AuthorDate: Mon Feb 4 16:13:10 2013 +0000
Commit:     Peter Korsgaard <jacmet@sunsite.dk>
CommitDate: Tue Feb 5 09:45:24 2013 +0100

    libupnp: security bump to version 1.6.18
    
    Fixes CVE-2012-5958, CVE-2012-5959, CVE-2012-5960, CVE-2012-5961,
    CVE-2012-5962, CVE-2012-5963, CVE-2012-5964 and CVE-2012-5965.
    
    Signed-off-by: Gustavo Zacarias <gustavo@zacarias.com.ar>
    Signed-off-by: Peter Korsgaard <jacmet@sunsite.dk>

diff --git a/package/libupnp/libupnp-1.6.17-no-ipv6.patch b/package/libupnp/libupnp-1.6.17-no-ipv6.patch
deleted file mode 100644
index 67b3895e5..000000000
--- a/package/libupnp/libupnp-1.6.17-no-ipv6.patch
+++ /dev/null
@@ -1,37 +0,0 @@
-From 812bdabc2c293173ea943059a577d480884a6cc1 Mon Sep 17 00:00:00 2001
-From: Gustavo Zacarias <gustavo@zacarias.com.ar>
-Date: Wed, 11 Apr 2012 11:17:45 -0300
-Subject: [PATCH] ssdp_device: exclude IPv6 stuff when there's no IPv6
-
-Add an additional INET_IPV6 exclusion around IPV6_MULTICAST_HOPS since
-the definition isn't guaranteed to exist when the toolchain lacks IPv6
-support.
-
-Signed-off-by: Gustavo Zacarias <gustavo@zacarias.com.ar>
----
- upnp/src/ssdp/ssdp_device.c |    2 ++
- 1 files changed, 2 insertions(+), 0 deletions(-)
-
-diff --git a/upnp/src/ssdp/ssdp_device.c b/upnp/src/ssdp/ssdp_device.c
-index d3517cc..a439005 100644
---- a/upnp/src/ssdp/ssdp_device.c
-+++ b/upnp/src/ssdp/ssdp_device.c
-@@ -210,6 +210,7 @@ static int NewRequestHandler(
- 			   (char *)&ttl, sizeof(int));
- 		socklen = sizeof(struct sockaddr_in);
- 		break;
-+#ifdef INET_IPV6
- 	case AF_INET6:
- 		inet_ntop(AF_INET6,
- 			  &((struct sockaddr_in6 *)DestAddr)->sin6_addr,
-@@ -219,6 +220,7 @@ static int NewRequestHandler(
- 		setsockopt(ReplySock, IPPROTO_IPV6, IPV6_MULTICAST_HOPS,
- 			   (char *)&hops, sizeof(hops));
- 		break;
-+#endif
- 	default:
- 		UpnpPrintf(UPNP_CRITICAL, SSDP, __FILE__, __LINE__,
- 			   "Invalid destination address specified.");
--- 
-1.7.3.4
-
diff --git a/package/libupnp/libupnp.mk b/package/libupnp/libupnp.mk
index 3d4606b72..295dace39 100644
--- a/package/libupnp/libupnp.mk
+++ b/package/libupnp/libupnp.mk
@@ -4,7 +4,7 @@
 #
 #############################################################
 
-LIBUPNP_VERSION = 1.6.17
+LIBUPNP_VERSION = 1.6.18
 LIBUPNP_SOURCE = libupnp-$(LIBUPNP_VERSION).tar.bz2
 LIBUPNP_SITE = http://downloads.sourceforge.net/project/pupnp/pupnp/libUPnP%20$(LIBUPNP_VERSION)
 LIBUPNP_CONF_ENV = ac_cv_lib_compat_ftime=no
