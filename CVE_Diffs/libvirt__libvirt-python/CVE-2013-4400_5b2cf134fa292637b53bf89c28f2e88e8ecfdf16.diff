libvirt__libvirt-python
commit 5b2cf134fa292637b53bf89c28f2e88e8ecfdf16
Author:     Daniel P. Berrange <berrange@redhat.com>
AuthorDate: Thu Oct 10 13:09:08 2013 +0100
Commit:     Daniel P. Berrange <berrange@redhat.com>
CommitDate: Mon Oct 21 14:19:05 2013 +0100

    Don't link virt-login-shell against libvirt.so (CVE-2013-4400)
    
    The libvirt.so library has far too many library deps to allow
    linking against it from setuid programs. Those libraries can
    do stuff in __attribute__((constructor) functions which is
    not setuid safe.
    
    The virt-login-shell needs to link directly against individual
    files that it uses, with all library deps turned off except
    for libxml2 and libselinux.
    
    Create a libvirt-setuid-rpc-client.la library which is linked
    to by virt-login-shell. A config-post.h file allows this library
    to disable all external deps except libselinux and libxml2.
    
    Signed-off-by: Daniel P. Berrange <berrange@redhat.com>
    (cherry picked from commit 3e2f27e13b94f7302ad948bcacb5e02c859a25fc)

diff --git a/Makefile.am b/Makefile.am
index f327300..c9c2a8b 100644
--- a/Makefile.am
+++ b/Makefile.am
@@ -20,6 +20,7 @@ INCLUDES = \
 	$(PYTHON_INCLUDES) \
 	-I$(top_builddir)/gnulib/lib \
 	-I$(top_srcdir)/gnulib/lib \
+	-I$(top_srcdir) \
 	-I$(top_builddir)/src \
 	-I$(top_srcdir)/src \
 	-I$(top_srcdir)/src/util \
