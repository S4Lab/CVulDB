samba-team__samba
commit 01a4bd717e1ae61f207bd0ae3109ee20846ff426
Author:     Andrew Bartlett <abartlet@samba.org>
AuthorDate: Mon Dec 8 14:20:21 2014 +1300
Commit:     Karolin Seeger <kseeger@samba.org>
CommitDate: Mon Jan 12 21:04:47 2015 +0100

    CVE-2014-8143:dsdb: Allow use of dsdb_autotransaction_request outside util.c
    
    Bug: https://bugzilla.samba.org/show_bug.cgi?id=10993
    
    Change-Id: If6bc90305a1e9a5a92562a01ba7e44330de91cc1
    Pair-programmed-with: Garming Sam <garming@catalyst.net.nz>
    Signed-off-by: Andrew Bartlett <abartlet@samba.org>
    Signed-off-by: Garming Sam <garming@catalyst.net.nz>
    Reviewed-by: Stefan Metzmacher <metze@samba.org>

diff --git a/source4/dsdb/common/util.c b/source4/dsdb/common/util.c
index 8e407768ffa..1f685dc66a3 100644
--- a/source4/dsdb/common/util.c
+++ b/source4/dsdb/common/util.c
@@ -1012,8 +1012,8 @@ int samdb_msg_set_uint(struct ldb_context *sam_ldb, TALLOC_CTX *mem_ctx,
 /*
  * Handle ldb_request in transaction
  */
-static int dsdb_autotransaction_request(struct ldb_context *sam_ldb,
-					struct ldb_request *req)
+int dsdb_autotransaction_request(struct ldb_context *sam_ldb,
+				 struct ldb_request *req)
 {
 	int ret;
 
