aperezdc__nss-altfiles
commit 8a7a5478be0b8047e8c88ed6e8efa1282d341f48
Author:     Adrián Pérez de Castro <aperez@igalia.com>
AuthorDate: Wed Dec 16 01:06:46 2015 +0200
Commit:     Adrián Pérez de Castro <aperez@igalia.com>
CommitDate: Wed Dec 16 01:06:46 2015 +0200

    Fix CVE-2014-8121
    
    Closes #3

diff --git a/src/nss_altfiles/files-XXX.c b/src/nss_altfiles/files-XXX.c
index 79e63be..d4a5033 100644
--- a/src/nss_altfiles/files-XXX.c
+++ b/src/nss_altfiles/files-XXX.c
@@ -132,7 +132,7 @@ CONCAT(CONCAT(CONCAT(_nss_, ALTFILES_MODULE_NAME), _set), ENTNAME) (int stayopen
 
   __libc_lock_lock (lock);
 
-  status = internal_setent (stayopen);
+  status = internal_setent (1);
 
   if (status == NSS_STATUS_SUCCESS && fgetpos (stream, &position) < 0)
     {
