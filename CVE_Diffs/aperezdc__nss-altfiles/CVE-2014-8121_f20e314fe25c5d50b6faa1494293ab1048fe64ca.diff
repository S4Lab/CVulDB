aperezdc__nss-altfiles
commit f20e314fe25c5d50b6faa1494293ab1048fe64ca
Author:     Adrián Pérez de Castro <aperez@igalia.com>
AuthorDate: Wed Dec 16 01:06:46 2015 +0200
Commit:     Adrián Pérez de Castro <aperez@igalia.com>
CommitDate: Wed Dec 16 01:08:15 2015 +0200

    Fix CVE-2014-8121
    
    Closes #3

diff --git a/files-XXX.c b/files-XXX.c
index 61f6c87..2e4a22e 100644
--- a/files-XXX.c
+++ b/files-XXX.c
@@ -134,7 +134,7 @@ CONCAT(CONCAT(CONCAT(_nss_, ALTFILES_MODULE_NAME), _set), ENTNAME) (int stayopen
 
   __libc_lock_lock (lock);
 
-  status = internal_setent (stayopen);
+  status = internal_setent (1);
 
   if (status == NSS_STATUS_SUCCESS && fgetpos (stream, &position) < 0)
     {
