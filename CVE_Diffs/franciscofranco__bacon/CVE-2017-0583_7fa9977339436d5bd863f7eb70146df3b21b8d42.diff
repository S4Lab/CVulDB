franciscofranco__bacon
commit 7fa9977339436d5bd863f7eb70146df3b21b8d42
Author:     Tom Marshall <tdm.code@gmail.com>
AuthorDate: Fri Aug 4 20:29:40 2017 +0000
Commit:     Tom Marshall <tdm.code@gmail.com>
CommitDate: Fri Aug 4 20:58:18 2017 +0000

    defconfig: msm: Disable CONFIG_CP_ACCESS
    
    Disable the cpaccess driver.
    This driver allows user space access to cpu registers.
    With this driver enabled, a CTS test causes the
    system to crash.
    
    Change-Id: Ib0d3d5a2f26defc8d34f9b275ebe246a4331fe56
    Fixes: CVE-2017-0583

diff --git a/arch/arm/configs/cyanogenmod_find7_defconfig b/arch/arm/configs/cyanogenmod_find7_defconfig
index ae3b42a0974..9754f80a8b7 100644
--- a/arch/arm/configs/cyanogenmod_find7_defconfig
+++ b/arch/arm/configs/cyanogenmod_find7_defconfig
@@ -679,7 +679,7 @@ CONFIG_SECCOMP=y
 CONFIG_CC_STACKPROTECTOR=y
 # CONFIG_DEPRECATED_PARAM_STRUCT is not set
 # CONFIG_ARM_FLUSH_CONSOLE_ON_RESTART is not set
-CONFIG_CP_ACCESS=y
+# CONFIG_CP_ACCESS is not set
 
 #
 # Boot options
diff --git a/arch/arm/configs/lineageos_bacon_defconfig b/arch/arm/configs/lineageos_bacon_defconfig
index 3131cfcddc2..45e8c3dfa64 100644
--- a/arch/arm/configs/lineageos_bacon_defconfig
+++ b/arch/arm/configs/lineageos_bacon_defconfig
@@ -96,6 +96,7 @@ CONFIG_ENABLE_VMALLOC_SAVING=y
 CONFIG_UACCESS_WITH_MEMCPY=y
 CONFIG_SECCOMP=y
 CONFIG_CC_STACKPROTECTOR=y
+# CONFIG_CP_ACCESS is not set
 CONFIG_USE_OF=y
 CONFIG_BUILD_ARM_APPENDED_DTB_IMAGE=y
 CONFIG_CPU_FREQ=y
