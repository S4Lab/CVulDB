Canonical-kernel__Ubuntu-kernel
commit 521496f06724496a2529ec81addbe61b4b863d3d
Author:     Dave Airlie <airlied@redhat.com>
AuthorDate: Sun Feb 20 21:57:32 2011 +0000
Commit:     Paolo Pisati <paolo.pisati@canonical.com>
CommitDate: Wed Jun 1 14:52:16 2011 +0200

    drm/radeon: fix regression with AA resolve checking, CVE-2011-1016
    
    BugLink: http://bugs.launchpad.net/bugs/745686
    
    CVE-2011-1016
    
    Some userspaces can emit a whole packet without disabling AA resolve
    by the looks of it, so we have to deal with them.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>
    Tested-by: Jorg Otte <jrg.otte@googlemail.com>
    (cherry picked from commit 45e4039c3aea597ede44a264cea322908cdedfe9)
    
    Signed-off-by: Tim Gardner <tim.gardner@canonical.com>
    Acked-by: Stefan Bader <stefan.bader@canonical.com>
    Signed-off-by: Tim Gardner <tim.gardner@canonical.com>
    Signed-off-by: Paolo Pisati <paolo.pisati@canonical.com>

diff --git a/drivers/gpu/drm/radeon/r100.c b/drivers/gpu/drm/radeon/r100.c
index aedb26f81f82..d4e585ff88cc 100644
--- a/drivers/gpu/drm/radeon/r100.c
+++ b/drivers/gpu/drm/radeon/r100.c
@@ -3444,7 +3444,7 @@ void r100_cs_track_clear(struct radeon_device *rdev, struct r100_cs_track *track
 		track->num_texture = 16;
 		track->maxy = 4096;
 		track->separate_cube = 0;
-		track->aaresolve = true;
+		track->aaresolve = false;
 		track->aa.robj = NULL;
 	}
 
