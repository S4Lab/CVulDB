Canonical-kernel__Ubuntu-kernel
commit 7a5d96d03e321114a815df0a6fdf68e0ce8b55ae
Author:     Ian Campbell <ian.campbell@citrix.com>
AuthorDate: Fri Feb 8 10:09:05 2013 +0000
Commit:     Herton Ronaldo Krzesinski <herton.krzesinski@canonical.com>
CommitDate: Wed Feb 20 19:51:00 2013 -0300

    UBUNTU: SAUCE: netback: correct netbk_tx_err to handle wrap around.
    
    BugLink: http://bugs.launchpad.net/bugs/1117325
    
    Signed-off-by: Ian Campbell <ian.campbell@citrix.com>
    Acked-by: Jan Beulich <JBeulich@suse.com>
    
    CVE-2013-0216
    
    Signed-off-by: Stefan Bader <stefan.bader@canonical.com>
    Acked-by: Luis Henriques <luis.henriques@canonical.com>
    Signed-off-by: Tim Gardner <tim.gardner@canonical.com>

diff --git a/drivers/net/xen-netback/netback.c b/drivers/net/xen-netback/netback.c
index 0bfab6268782..92badd4717b1 100644
--- a/drivers/net/xen-netback/netback.c
+++ b/drivers/net/xen-netback/netback.c
@@ -851,7 +851,7 @@ static void netbk_tx_err(struct xenvif *vif,
 
 	do {
 		make_tx_response(vif, txp, XEN_NETIF_RSP_ERROR);
-		if (cons >= end)
+		if (cons == end)
 			break;
 		txp = RING_GET_REQUEST(&vif->tx, cons++);
 	} while (1);
