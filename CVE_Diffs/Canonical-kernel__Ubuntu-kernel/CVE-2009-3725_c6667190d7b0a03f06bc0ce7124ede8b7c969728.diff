Canonical-kernel__Ubuntu-kernel
commit c6667190d7b0a03f06bc0ce7124ede8b7c969728
Author:     Stephen Boyd <bebarino@gmail.com>
AuthorDate: Tue Oct 6 01:39:51 2009 -0700
Commit:     Stefan Bader <stefan.bader@canonical.com>
CommitDate: Tue Dec 1 19:58:55 2009 +0100

    connector: Fix incompatible pointer type warning
    
    CVE-2009-3725
    
    Commit 7069331 (connector: Provide the sender's credentials to the
    callback, 2009-10-02) changed callbacks to take two arguments but missed
    this one.
    
    drivers/connector/cn_proc.c: In function ‘cn_proc_init’:
    drivers/connector/cn_proc.c:263: warning: passing argument 3 of
    ‘cn_add_callback’ from incompatible pointer type
    
    Signed-off-by: Stephen Boyd <bebarino@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Leann Ogasawara <leann.ogasawara@canonical.com>
    Signed-off-by: Stefan Bader <stefan.bader@canonical.com>

diff --git a/drivers/connector/cn_proc.c b/drivers/connector/cn_proc.c
index 5c9f67f98d10..9fd586160c95 100644
--- a/drivers/connector/cn_proc.c
+++ b/drivers/connector/cn_proc.c
@@ -196,9 +196,9 @@ static void cn_proc_ack(int err, int rcvd_seq, int rcvd_ack)
  * cn_proc_mcast_ctl
  * @data: message sent from userspace via the connector
  */
-static void cn_proc_mcast_ctl(void *data)
+static void cn_proc_mcast_ctl(struct cn_msg *msg,
+			      struct netlink_skb_parms *nsp)
 {
-	struct cn_msg *msg = data;
 	enum proc_cn_mcast_op *mc_op = NULL;
 	int err = 0;
 
