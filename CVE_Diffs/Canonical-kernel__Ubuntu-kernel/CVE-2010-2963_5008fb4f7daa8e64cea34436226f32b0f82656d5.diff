Canonical-kernel__Ubuntu-kernel
commit 5008fb4f7daa8e64cea34436226f32b0f82656d5
Author:     Kees Cook <kees.cook@canonical.com>
AuthorDate: Wed Oct 13 12:12:06 2010 -0700
Commit:     Steve Conklin <sconklin@canonical.com>
CommitDate: Thu Oct 14 16:07:54 2010 -0500

    v4l: disable dangerous buggy compat function
    
    Fix CVE-2010-2963 by disabling the entire bad compat function.
    
    Signed-off-by: Kees Cook <kees.cook@canonical.com>
    Signed-off-by: Steve Conklin <sconklin@canonical.com>

diff --git a/drivers/media/video/compat_ioctl32.c b/drivers/media/video/compat_ioctl32.c
index cefd1381e8de..08f28b03b250 100644
--- a/drivers/media/video/compat_ioctl32.c
+++ b/drivers/media/video/compat_ioctl32.c
@@ -504,6 +504,7 @@ struct video_code32
 
 static inline int microcode32(struct video_code *kp, struct video_code32 __user *up)
 {
+	return -EFAULT;
 	if(!access_ok(VERIFY_READ, up, sizeof(struct video_code32)) ||
 		copy_from_user(kp->loadwhat, up->loadwhat, sizeof (up->loadwhat)) ||
 		get_user(kp->datasize, &up->datasize) ||
