Canonical-kernel__Ubuntu-kernel
commit 168a4d265ab8427725fe96913c8ec148fc8a59a1
Author:     Dave Airlie <airlied@redhat.com>
AuthorDate: Sun Feb 20 21:57:32 2011 +0000
Commit:     Brad Figg <brad.figg@canonical.com>
CommitDate: Wed Apr 20 09:40:25 2011 -0700

    drm/radeon: fix regression with AA resolve checking, CVE-2011-1016
    
    BugLink: http://bugs.launchpad.net/bugs/745686
    
    CVE-2011-1016
    
    Some userspaces can emit a whole packet without disabling AA resolve
    by the looks of it, so we have to deal with them.
    
    Signed-off-by: Dave Airlie <airlied@redhat.com>
    Tested-by: Jorg Otte <jrg.otte@googlemail.com>
    (cherry picked from commit 45e4039c3aea597ede44a264cea322908cdedfe9)
    
    Signed-off-by: Tim Gardner <tim.gardner@canonical.com>
    Acked-by: Stefan Bader <stefan.bader@canonical.com>
    Signed-off-by: Tim Gardner <tim.gardner@canonical.com>

diff --git a/drivers/gpu/drm/radeon/r100.c b/drivers/gpu/drm/radeon/r100.c
index 2cfb39f54765..947570cf400e 100644
--- a/drivers/gpu/drm/radeon/r100.c
+++ b/drivers/gpu/drm/radeon/r100.c
@@ -3031,7 +3031,7 @@ void r100_cs_track_clear(struct radeon_device *rdev, struct r100_cs_track *track
 		track->num_texture = 16;
 		track->maxy = 4096;
 		track->separate_cube = 0;
-		track->aaresolve = true;
+		track->aaresolve = false;
 		track->aa.robj = NULL;
 	}
 
