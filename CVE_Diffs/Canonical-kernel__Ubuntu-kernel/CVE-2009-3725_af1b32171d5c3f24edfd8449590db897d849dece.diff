Canonical-kernel__Ubuntu-kernel
commit af1b32171d5c3f24edfd8449590db897d849dece
Author:     Stephen Boyd <bebarino@gmail.com>
AuthorDate: Tue Oct 6 01:39:51 2009 -0700
Commit:     Stefan Bader <stefan.bader@canonical.com>
CommitDate: Wed Dec 2 10:54:18 2009 +0100

    connector: Fix incompatible pointer type warning
    
    CVE-2009-3725
    
    commit f0b25932b8e60e96f5f371b27442e560803ac6f5 upstream (did not apply
    cleanly, manually applied by hand)
    
    Commit 7069331 (connector: Provide the sender's credentials to the
    callback, 2009-10-02) changed callbacks to take two arguments but missed
    this one.
    
    drivers/connector/cn_proc.c: In function ‘cn_proc_init’:
    drivers/connector/cn_proc.c:263: warning: passing argument 3 of
    ‘cn_add_callback’ from incompatible pointer type
    
    Signed-off-by: Stephen Boyd <bebarino@gmail.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>
    Signed-off-by: Leann Ogasawara <leann.ogasawara@canonical.com>
    Signed-off-by: Stefan Bader <stefan.bader@canonical.com>

diff --git a/drivers/connector/cn_proc.c b/drivers/connector/cn_proc.c
index c5afc98e2675..a52e5a15c9a6 100644
--- a/drivers/connector/cn_proc.c
+++ b/drivers/connector/cn_proc.c
@@ -202,9 +202,9 @@ static void cn_proc_ack(int err, int rcvd_seq, int rcvd_ack)
  * cn_proc_mcast_ctl
  * @data: message sent from userspace via the connector
  */
-static void cn_proc_mcast_ctl(void *data)
+static void cn_proc_mcast_ctl(struct cn_msg *msg,
+			      struct netlink_skb_parms *nsp)
 {
-	struct cn_msg *msg = data;
 	enum proc_cn_mcast_op *mc_op = NULL;
 	int err = 0;
 
