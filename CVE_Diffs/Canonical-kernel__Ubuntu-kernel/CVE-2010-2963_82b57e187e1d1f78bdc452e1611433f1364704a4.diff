Canonical-kernel__Ubuntu-kernel
commit 82b57e187e1d1f78bdc452e1611433f1364704a4
Author:     Kees Cook <kees.cook@canonical.com>
AuthorDate: Wed Oct 13 12:12:06 2010 -0700
Commit:     Steve Conklin <sconklin@canonical.com>
CommitDate: Thu Oct 14 15:32:11 2010 -0500

    v4l: disable dangerous buggy compat function
    
    Fix CVE-2010-2963 by disabling the entire bad compat function.
    
    Signed-off-by: Kees Cook <kees.cook@canonical.com>
    Signed-off-by: Steve Conklin <sconklin@canonical.com>

diff --git a/drivers/media/video/v4l2-compat-ioctl32.c b/drivers/media/video/v4l2-compat-ioctl32.c
index 0056b115b42e..26d3c9866cef 100644
--- a/drivers/media/video/v4l2-compat-ioctl32.c
+++ b/drivers/media/video/v4l2-compat-ioctl32.c
@@ -198,6 +198,7 @@ struct video_code32 {
 
 static int get_microcode32(struct video_code *kp, struct video_code32 __user *up)
 {
+	return -EFAULT;
 	if (!access_ok(VERIFY_READ, up, sizeof(struct video_code32)) ||
 		copy_from_user(kp->loadwhat, up->loadwhat, sizeof(up->loadwhat)) ||
 		get_user(kp->datasize, &up->datasize) ||
