Canonical-kernel__Ubuntu-kernel
commit 73c188b5e7ad0fcf5b2a8611f261ca2192b90c19
Author:     Stefan Bader <stefan.bader@canonical.com>
AuthorDate: Fri Mar 5 19:32:44 2010 +0100
Commit:     Stefan Bader <stefan.bader@canonical.com>
CommitDate: Wed Mar 10 17:09:43 2010 +0100

    UBUNTU: openvz: Adapt connector code patch
    
    CVE-2010-0410
    
    After "connector: Delete buggy notification code." one patch needed to
    be modified.
    
    Signed-off-by: Stefan Bader <stefan.bader@canonical.com>

diff --git a/debian/binary-custom.d/openvz/patchset/0149-MS-NETNS-Consolidate-kernel-netlink-socket-destructi.patch b/debian/binary-custom.d/openvz/patchset/0149-MS-NETNS-Consolidate-kernel-netlink-socket-destructi.patch
index aadc5252f781..8f83c85c7ea3 100644
--- a/debian/binary-custom.d/openvz/patchset/0149-MS-NETNS-Consolidate-kernel-netlink-socket-destructi.patch
+++ b/debian/binary-custom.d/openvz/patchset/0149-MS-NETNS-Consolidate-kernel-netlink-socket-destructi.patch
@@ -44,16 +44,6 @@ index bf9716b..615bc09 100644
  		return -EINVAL;
  	}
  	
-@@ -452,8 +451,7 @@ static int __devinit cn_init(void)
- 	if (err) {
- 		cn_already_initialized = 0;
- 		cn_queue_free_dev(dev->cbdev);
--		if (dev->nls->sk_socket)
--			sock_release(dev->nls->sk_socket);
-+		netlink_kernel_release(dev->nls);
- 		return -EINVAL;
- 	}
- 
 @@ -468,8 +466,7 @@ static void __devexit cn_fini(void)
  
  	cn_del_callback(&dev->id);
