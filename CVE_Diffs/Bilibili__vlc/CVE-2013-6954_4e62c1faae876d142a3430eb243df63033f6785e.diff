Bilibili__vlc
commit 4e62c1faae876d142a3430eb243df63033f6785e
Author:     Jean-Baptiste Kempf <jb@videolan.org>
AuthorDate: Sat Feb 8 15:48:54 2014 +0100
Commit:     Jean-Baptiste Kempf <jb@videolan.org>
CommitDate: Sat Feb 8 15:48:54 2014 +0100

    Contribs: update libpng to 1.6.8
    
    See CVE-2013-6954

diff --git a/contrib/src/png/SHA512SUMS b/contrib/src/png/SHA512SUMS
index e0348d6118..1c073fd756 100644
--- a/contrib/src/png/SHA512SUMS
+++ b/contrib/src/png/SHA512SUMS
@@ -1 +1 @@
-a720e1b576958a445ccf301c3de2dbf1ea58590c23ec4edd76ee1d65ab611c941b82e173fbef1974c5efbe8bf31d8e800e34f37819d9f406db4ef704d12106df  libpng-1.6.3.tar.xz
+788da3ba1785fd9b9d1009f3b2dad5120ce330e0340b14057143957010b71920a0f524c9f77c877f359382f75f95542f6b71a81b6ee138b7b6ae1d11c318ebde  libpng-1.6.8.tar.xz
diff --git a/contrib/src/png/automake.patch b/contrib/src/png/automake.patch
index 9757dd1068..ae42262428 100644
--- a/contrib/src/png/automake.patch
+++ b/contrib/src/png/automake.patch
@@ -1,12 +1,11 @@
-diff -ur png/configure.ac png.new/configure.ac
---- png/configure.ac	2013-07-18 03:03:02.000000000 +0300
-+++ png.new/configure.ac	2013-08-08 19:20:12.459900241 +0300
+--- libpng-1.6.8/configure.ac.orig	2014-02-08 15:42:46.399091835 +0100
++++ libpng-1.6.8/configure.ac	2014-02-08 15:47:42.684534041 +0100
 @@ -27,7 +27,7 @@
  # dist-xz requires automake 1.11 or later
  # 1.12.2 fixes a security issue in 1.11.2 and 1.12.1
  # 1.13 is required for parallel tests
--AM_INIT_AUTOMAKE([1.13 foreign dist-xz color-tests silent-rules])
-+AM_INIT_AUTOMAKE([1.11 foreign dist-xz color-tests silent-rules])
+-AM_INIT_AUTOMAKE([1.13 foreign dist-xz color-tests silent-rules subdir-objects])
++AM_INIT_AUTOMAKE([1.11 foreign dist-xz color-tests silent-rules subdir-objects])
  # The following line causes --disable-maintainer-mode to be the default to
  # configure, this is necessary because libpng distributions cannot rely on the
  # time stamps of the autotools generated files being correct
diff --git a/contrib/src/png/rules.mak b/contrib/src/png/rules.mak
index d1adc34abc..468dd14610 100644
--- a/contrib/src/png/rules.mak
+++ b/contrib/src/png/rules.mak
@@ -1,5 +1,5 @@
 # PNG
-PNG_VERSION := 1.6.3
+PNG_VERSION := 1.6.8
 PNG_URL := $(SF)/libpng/libpng16/$(PNG_VERSION)/libpng-$(PNG_VERSION).tar.xz
 
 PKGS += png
